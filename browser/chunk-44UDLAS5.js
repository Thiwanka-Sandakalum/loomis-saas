import{a as H,d as E}from"./chunk-SYB5CXAL.js";import{a as Y}from"./chunk-QRB52CVI.js";import{b as U,d as J,e as z}from"./chunk-TKVNSRWZ.js";import{Bc as O,Ec as $,Fb as T,Gb as k,Pa as s,Pb as j,Rb as A,Tb as d,Ub as f,Vb as w,_ as h,_a as v,dc as F,ec as R,jc as u,mc as B,nb as y,oa as x,pb as I,rb as q,sb as P,tb as L,ub as m,vb as l,wb as S,xb as p,yb as g,zb as M}from"./chunk-JKZ4R3JY.js";import{a as b,b as D}from"./chunk-2NFLSA4Y.js";function G(){let e=x([]),i=x({}),r=x(!1),o=x(null),N=u(()=>{let t=e(),n=i();if(n.status&&n.status.length>0&&(t=t.filter(a=>n.status.includes(a.status))),n.channel&&n.channel.length>0&&(t=t.filter(a=>n.channel.includes(a.channel))),n.priority&&n.priority.length>0&&(t=t.filter(a=>n.priority.includes(a.priority))),n.assignedTo&&(t=t.filter(a=>a.assignedTo===n.assignedTo)),n.search){let a=n.search.toLowerCase();t=t.filter(c=>c.subject.toLowerCase().includes(a)||c.description.toLowerCase().includes(a)||c.customerName.toLowerCase().includes(a))}return t}),W=u(()=>{let t=e();return{total:t.length,open:t.filter(n=>n.status==="open").length,in_progress:t.filter(n=>n.status==="in_progress").length,resolved:t.filter(n=>n.status==="resolved").length,urgent:t.filter(n=>n.priority==="urgent").length}}),X=async()=>{r.set(!0);try{e.set([{id:"1",tenantId:"tenant1",channel:"telegram",status:"open",subject:"Package not delivered",description:"My package was supposed to arrive yesterday but I haven't received it yet.",customerId:"cust1",customerName:"John Doe",customerEmail:"john@example.com",priority:"high",createdAt:new Date("2026-02-17"),updatedAt:new Date("2026-02-17"),messages:[]},{id:"2",tenantId:"tenant1",channel:"web",status:"in_progress",subject:"Damaged item",description:"The item I received is damaged.",customerId:"cust2",customerName:"Jane Smith",assignedTo:"agent1",priority:"urgent",createdAt:new Date("2026-02-16"),updatedAt:new Date("2026-02-18"),messages:[]}])}catch(t){console.error("Error loading inquiries:",t)}finally{r.set(!1)}},Z=t=>{i.update(n=>b(b({},n),t))},ee=t=>{o.set(t)},te=async(t,n)=>{try{e.update(a=>a.map(c=>c.id===t?D(b({},c),{status:n,updatedAt:new Date}):c))}catch(a){throw console.error("Error updating inquiry status:",a),a}},ne=async(t,n)=>{try{e.update(a=>a.map(c=>c.id===t?D(b({},c),{assignedTo:n,updatedAt:new Date}):c))}catch(a){throw console.error("Error assigning inquiry:",a),a}},ie=async(t,n)=>{try{console.log("Sending reply to inquiry",t,n)}catch(a){throw console.error("Error sending reply:",a),a}};return{inquiries:e.asReadonly(),filteredInquiries:N,filters:i.asReadonly(),isLoading:r.asReadonly(),selectedInquiry:o.asReadonly(),stats:W,loadInquiries:X,updateFilters:Z,selectInquiry:ee,updateInquiryStatus:te,assignInquiry:ne,sendReply:ie}}function re(e,i){if(e&1&&(p(0,"span",3),d(1),g()),e&2){let r=k();s(),f(r.userInitial())}}function ae(e,i){e&1&&(p(0,"span",4),d(1,"person"),g())}var C=class e{auth0Service=h(E);userProfile=u(()=>this.auth0Service.getUserProfile());displayName=u(()=>{let i=this.userProfile();return i?.name||i?.given_name||"Admin User"});userEmail=u(()=>this.userProfile()?.email||"admin@loomiscourier.com");userInitial=u(()=>this.displayName()?.charAt(0).toUpperCase()||"A");logout(){this.auth0Service.logout()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=v({type:e,selectors:[["app-auth0-profile"]],decls:14,vars:3,consts:[[1,"flex","items-center","gap-3","rounded-xl","bg-white/50","p-3","shadow-sm","border","border-slate-200/50","dark:bg-slate-800/50","dark:border-slate-700/50"],[1,"relative"],[1,"h-10","w-10","rounded-full","bg-gradient-to-br","from-primary","via-primary/90","to-purple-600","flex","items-center","justify-center","shadow-sm"],[1,"text-sm","font-bold","text-white"],[1,"material-symbols-outlined","text-lg","text-white"],[1,"absolute","-bottom-0.5","-right-0.5","h-3","w-3","bg-green-500","rounded-full","border-2","border-white","dark:border-slate-800","shadow-sm"],[1,"flex-1","min-w-0","text-left"],[1,"text-sm","font-semibold","text-slate-900","dark:text-white","truncate"],[1,"text-xs","text-slate-500","dark:text-slate-400","truncate"],["title","Sign Out",1,"flex","items-center","justify-center","h-8","w-8","rounded-lg","text-slate-400","hover:text-red-600","hover:bg-red-50","dark:hover:text-red-400","dark:hover:bg-red-900/20","transition-colors",3,"click"],[1,"material-symbols-outlined","text-lg"]],template:function(r,o){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),y(3,re,2,1,"span",3)(4,ae,2,0,"span",4),g(),M(5,"div",5),g(),p(6,"div",6)(7,"p",7),d(8),g(),p(9,"p",8),d(10),g()(),p(11,"button",9),T("click",function(){return o.logout()}),p(12,"span",10),d(13,"logout"),g()()()),r&2&&(s(3),I(o.userInitial()?3:4),s(5),f(o.displayName()),s(2),f(o.userEmail()))},encapsulation:2,changeDetection:0})};var oe=(e,i)=>i.route;function se(e,i){if(e&1&&(m(0,"span",17),d(1),l()),e&2){let r=k().$implicit;s(),w(" ",r.badge," ")}}function le(e,i){if(e&1&&(m(0,"a",10,0)(2,"span",13),d(3),l(),m(4,"span",16),d(5),l(),y(6,se,2,1,"span",17),l()),e&2){let r=i.$implicit,o=j(1);L("routerLink",r.route),s(2),A("fill-1",o.isActive),s(),w(" ",r.icon," "),s(),A("font-semibold",o.isActive)("font-medium",!o.isActive),s(),w(" ",r.label," "),s(),I(r.badge?6:-1)}}function de(e,i){e&1&&(m(0,"div",15),S(1,"app-auth0-profile"),l())}var _=class e{auth0=h(H);auth0Service=h(E);tenantService=h(Y);companyName=u(()=>this.tenantService.currentTenant()?.companyName||"Your Platform");platformLabel=u(()=>this.tenantService.currentTenant()?.isOnboardingComplete?"Courier Platform":"Admin Platform");inquiryStats=G().stats;inquiryBadge=u(()=>{let i=this.inquiryStats();return(i.open||0)+(i.in_progress||0)});navItems=B([{label:"Dashboard",icon:"grid_view",route:"/dashboard"},{label:"Shipments",icon:"package_2",route:"/shipments"},{label:"Inquiries",icon:"chat_bubble",route:"/inquiries",badge:this.inquiryBadge()},{label:"Integrations",icon:"extension",route:"/integrations"},{label:"AI Agent",icon:"smart_toy",route:"/ai-agent"}]);signOut(){this.auth0Service.logout()}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=v({type:e,selectors:[["app-sidebar"]],inputs:{navItems:[1,"navItems"]},decls:22,vars:5,consts:[["rla","routerLinkActive"],[1,"flex","h-screen","w-72","flex-col","justify-between","border-r","border-slate-200","bg-white","p-4","dark:border-slate-800","dark:bg-slate-900","fixed","left-0","top-0","z-20","overflow-y-auto"],[1,"flex","flex-col","gap-6"],[1,"flex","items-center","gap-3","px-2"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-xl","bg-primary","text-white"],[1,"material-symbols-outlined","text-2xl"],[1,"flex","flex-col"],[1,"text-base","font-bold","leading-tight","text-slate-900","dark:text-white"],[1,"text-xs","font-medium","text-slate-500","dark:text-slate-400"],[1,"flex","flex-col","gap-1"],["routerLinkActive","bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary-300",1,"flex","items-center","gap-3","rounded-lg","px-3","py-2.5","text-slate-600","hover:bg-slate-50","hover:text-slate-900","dark:text-slate-400","dark:hover:bg-slate-800","dark:hover:text-white","transition-colors",3,"routerLink"],[1,"flex","flex-col","gap-3","border-t","border-slate-200","pt-4","dark:border-slate-800"],["routerLink","/settings","routerLinkActive","bg-primary/10 text-primary",1,"group","flex","items-center","gap-3","rounded-lg","px-3","py-2.5","text-slate-600","hover:bg-slate-50","hover:text-slate-900","dark:text-slate-400","dark:hover:bg-slate-800","dark:hover:text-white","transition-colors"],[1,"material-symbols-outlined","text-[20px]"],[1,"text-sm","font-medium"],[1,"px-2"],[1,"text-sm"],[1,"ml-auto","rounded-full","bg-red-100","px-2","py-0.5","text-xs","font-semibold","text-red-600","dark:bg-red-900/30","dark:text-red-400"]],template:function(r,o){r&1&&(m(0,"aside",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),d(5,"local_shipping"),l()(),m(6,"div",6)(7,"h1",7),d(8),l(),m(9,"p",8),d(10),l()()(),m(11,"nav",9),q(12,le,7,10,"a",10,oe),l()(),m(14,"div",11)(15,"a",12)(16,"span",13),d(17,"settings"),l(),m(18,"span",14),d(19,"Settings"),l()(),y(20,de,2,0,"div",15),F(21,"async"),l()()),r&2&&(s(8),f(o.companyName()),s(2),f(o.platformLabel()),s(2),P(o.navItems()),s(8),I(R(21,3,o.auth0.isAuthenticated$)?20:-1))},dependencies:[J,z,C,$,O],encapsulation:2})};var V=class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=v({type:e,selectors:[["app-layout"]],decls:5,vars:0,consts:[[1,"relative","flex","min-h-screen","w-full","flex-row","overflow-hidden","bg-background-light","dark:bg-background-dark"],[1,"flex-1","ml-72","flex","flex-col","h-screen","overflow-hidden"],[1,"flex-1","overflow-y-auto","bg-background-light","dark:bg-background-dark","p-8"]],template:function(r,o){r&1&&(m(0,"div",0),S(1,"app-sidebar"),m(2,"div",1)(3,"main",2),S(4,"router-outlet"),l()()())},dependencies:[U,_],encapsulation:2})};export{_ as a,V as b};
