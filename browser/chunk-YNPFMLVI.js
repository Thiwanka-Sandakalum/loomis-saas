import"./chunk-XFNDSNIK.js";import{a as B}from"./chunk-QRB52CVI.js";import"./chunk-GFU3UW6A.js";import"./chunk-RHAMT7CE.js";import{a as X}from"./chunk-TYIT34KR.js";import{a as Q}from"./chunk-AQ7FFUGL.js";import"./chunk-ZYQ7KRKH.js";import{a as W,b as $,d as K,f as G,h as j,m as q,n as Y,o as Z,p as H,r as J}from"./chunk-5VRDLXRS.js";import"./chunk-TZMPXKHX.js";import"./chunk-OFIQSEYL.js";import"./chunk-GF7BQK6Q.js";import"./chunk-XAZ3CRE3.js";import{Cb as f,Cc as F,Eb as u,Ec as U,Gb as s,Na as A,Pa as r,Rb as y,Tb as o,Ub as b,Vb as h,_ as M,_a as D,cc as I,da as g,dc as T,ea as _,fc as O,jc as k,mb as N,nb as p,oa as C,pb as m,rb as w,sb as P,tb as x,ub as a,vb as n,wb as L,yc as z}from"./chunk-JKZ4R3JY.js";import{a as v,b as S}from"./chunk-2NFLSA4Y.js";var te=(t,i)=>[t,i],ee=(t,i)=>i.id;function ne(t,i){if(t&1){let e=f();a(0,"button",9),u("click",function(){let l=g(e).$implicit,c=s();return _(c.activeTab.set(l.id))}),o(1),n()}if(t&2){let e=i.$implicit,d=s();y("border-primary",d.activeTab()===e.id)("text-primary",d.activeTab()===e.id)("border-transparent",d.activeTab()!==e.id)("text-slate-500",d.activeTab()!==e.id),N("aria-selected",d.activeTab()===e.id),r(),b(e.label)}}function ie(t,i){if(t&1){let e=f();a(0,"button",29),u("click",function(){g(e);let l=s(2);return _(l.startEdit("profile"))}),a(1,"span",30),o(2,"edit"),n(),o(3,"Edit "),n()}}function ae(t,i){if(t&1){let e=f();a(0,"button",31),u("click",function(){g(e);let l=s(2);return _(l.cancelEdit("profile"))}),a(1,"span",30),o(2,"close"),n(),o(3,"Cancel "),n(),a(4,"button",32),u("click",function(){g(e);let l=s(2);return _(l.saveProfile())}),a(5,"span",30),o(6),n(),o(7),n()}if(t&2){let e=s(2);r(4),x("disabled",e.profileState().saving),r(),y("animate-spin",e.profileState().saving),r(),h(" ",e.profileState().saving?"refresh":"save"," "),r(),h(" ",e.profileState().saving?"Saving\u2026":"Save"," ")}}function oe(t,i){if(t&1&&(a(0,"div",16)(1,"span",30),o(2,"error"),n(),o(3),n()),t&2){let e=s(2);r(3),h("",e.profileState().error," ")}}function re(t,i){t&1&&(a(0,"div",17)(1,"span",30),o(2,"check_circle"),n(),o(3,"Company profile saved successfully. "),n())}function le(t,i){if(t&1){let e=f();a(0,"input",33),u("ngModelChange",function(l){g(e);let c=s(2);return _(c.companyName.set(l))}),n()}if(t&2){let e=s(2);x("ngModel",e.companyName())}}function se(t,i){if(t&1&&(a(0,"p",21),o(1),n()),t&2){let e=s(2);r(),b(e.companyName()||"\u2014")}}function de(t,i){if(t&1){let e=f();a(0,"div",22)(1,"span",34),o(2,"language"),n(),a(3,"input",35),u("ngModelChange",function(l){g(e);let c=s(2);return _(c.companyWebsite.set(l))}),n()()}if(t&2){let e=s(2);r(3),x("ngModel",e.companyWebsite())}}function ce(t,i){if(t&1&&(a(0,"a",36),o(1),a(2,"span",37),o(3,"open_in_new"),n()()),t&2){let e=s(3);x("href",e.companyWebsite(),A),r(),h(" ",e.companyWebsite())}}function pe(t,i){t&1&&o(0," \u2014 ")}function me(t,i){if(t&1&&(a(0,"p",21),p(1,ce,4,2,"a",36)(2,pe,1,0),n()),t&2){let e=s(2);r(),m(e.companyWebsite()?1:2)}}function ge(t,i){if(t&1){let e=f();a(0,"textarea",38),u("ngModelChange",function(l){g(e);let c=s(2);return _(c.companyDescription.set(l))}),n()}if(t&2){let e=s(2);x("ngModel",e.companyDescription())}}function _e(t,i){if(t&1&&(a(0,"p",25),o(1),n()),t&2){let e=s(2);r(),b(e.companyDescription()||"\u2014")}}function ue(t,i){if(t&1){let e=f();a(0,"div",22)(1,"span",34),o(2,"mail"),n(),a(3,"input",39),u("ngModelChange",function(l){g(e);let c=s(2);return _(c.supportEmail.set(l))}),n()()}if(t&2){let e=s(2);r(3),x("ngModel",e.supportEmail())}}function xe(t,i){if(t&1&&(a(0,"p",21),o(1),n()),t&2){let e=s(2);r(),b(e.supportEmail()||"\u2014")}}function fe(t,i){if(t&1){let e=f();a(0,"div",22)(1,"span",34),o(2,"call"),n(),a(3,"input",40),u("ngModelChange",function(l){g(e);let c=s(2);return _(c.supportPhone.set(l))}),n()()}if(t&2){let e=s(2);r(3),x("ngModel",e.supportPhone())}}function Ce(t,i){if(t&1&&(a(0,"p",21),o(1),n()),t&2){let e=s(2);r(),b(e.supportPhone()||"\u2014")}}function be(t,i){if(t&1){let e=f();a(0,"textarea",41),u("ngModelChange",function(l){g(e);let c=s(2);return _(c.companyAddress.set(l))}),n()}if(t&2){let e=s(2);x("ngModel",e.companyAddress())}}function ve(t,i){if(t&1&&(a(0,"p",25),o(1),n()),t&2){let e=s(2);r(),b(e.companyAddress()||"\u2014")}}function Se(t,i){if(t&1){let e=f();a(0,"button",29),u("click",function(){g(e);let l=s(2);return _(l.startEdit("regional"))}),a(1,"span",30),o(2,"edit"),n(),o(3,"Edit "),n()}}function he(t,i){if(t&1){let e=f();a(0,"button",31),u("click",function(){g(e);let l=s(2);return _(l.cancelEdit("regional"))}),a(1,"span",30),o(2,"close"),n(),o(3,"Cancel "),n(),a(4,"button",32),u("click",function(){g(e);let l=s(2);return _(l.saveRegional())}),a(5,"span",30),o(6),n(),o(7),n()}if(t&2){let e=s(2);r(4),x("disabled",e.regionalState().saving),r(),y("animate-spin",e.regionalState().saving),r(),h(" ",e.regionalState().saving?"refresh":"save"," "),r(),h(" ",e.regionalState().saving?"Saving\u2026":"Save"," ")}}function ye(t,i){if(t&1&&(a(0,"div",16)(1,"span",30),o(2,"error"),n(),o(3),n()),t&2){let e=s(2);r(3),h("",e.regionalState().error," ")}}function Ee(t,i){t&1&&(a(0,"div",17)(1,"span",30),o(2,"check_circle"),n(),o(3,"Regional preferences saved. "),n())}function Me(t,i){if(t&1){let e=f();a(0,"select",42),u("ngModelChange",function(l){g(e);let c=s(2);return _(c.currency.set(l))}),a(1,"option",43),o(2,"USD ($)"),n(),a(3,"option",44),o(4,"EUR (\u20AC)"),n(),a(5,"option",45),o(6,"GBP (\xA3)"),n(),a(7,"option",46),o(8,"CAD ($)"),n()()}if(t&2){let e=s(2);x("ngModel",e.currency())}}function ke(t,i){if(t&1&&(a(0,"p",21),o(1),n()),t&2){let e=s(2);r(),b(e.currencyLabel())}}function we(t,i){if(t&1){let e=f();a(0,"select",42),u("ngModelChange",function(l){g(e);let c=s(2);return _(c.timezone.set(l))}),a(1,"option",47),o(2,"Pacific Time (PT)"),n(),a(3,"option",48),o(4,"Eastern Time (ET)"),n(),a(5,"option",49),o(6,"UTC (GMT)"),n(),a(7,"option",50),o(8,"Central European Time (CET)"),n()()}if(t&2){let e=s(2);x("ngModel",e.timezone())}}function Pe(t,i){if(t&1&&(a(0,"p",21),o(1),n()),t&2){let e=s(2);r(),b(e.timezoneLabel())}}function Te(t,i){if(t&1){let e=f();a(0,"select",42),u("ngModelChange",function(l){g(e);let c=s(2);return _(c.language.set(l))}),a(1,"option",51),o(2,"English (US)"),n(),a(3,"option",52),o(4,"French (FR)"),n(),a(5,"option",53),o(6,"Spanish (ES)"),n(),a(7,"option",54),o(8,"German (DE)"),n()()}if(t&2){let e=s(2);x("ngModel",e.language())}}function Oe(t,i){if(t&1&&(a(0,"p",21),o(1),n()),t&2){let e=s(2);r(),b(e.languageLabel())}}function Ve(t,i){if(t&1&&(a(0,"div",7)(1,"div",10)(2,"div",11)(3,"div")(4,"h2",12),o(5,"Company Profile"),n(),a(6,"p",13),o(7,"Your organization's public information and contact details."),n()(),a(8,"div",14),p(9,ie,4,0,"button",15)(10,ae,8,5),n()(),p(11,oe,4,1,"div",16),p(12,re,4,0,"div",17),a(13,"div",18)(14,"div")(15,"label",19),o(16,"Organization Name"),n(),p(17,le,1,1,"input",20)(18,se,2,1,"p",21),n(),a(19,"div")(20,"label",19),o(21,"Corporate Website"),n(),p(22,de,4,1,"div",22)(23,me,3,1,"p",21),n(),a(24,"div",23)(25,"label",19),o(26,"Company Description"),n(),p(27,ge,1,1,"textarea",24)(28,_e,2,1,"p",25),n(),a(29,"div")(30,"label",19),o(31,"Support Email"),n(),p(32,ue,4,1,"div",22)(33,xe,2,1,"p",21),n(),a(34,"div")(35,"label",19),o(36,"Support Phone"),n(),p(37,fe,4,1,"div",22)(38,Ce,2,1,"p",21),n(),a(39,"div",23)(40,"label",19),o(41,"Headquarters Address"),n(),p(42,be,1,1,"textarea",26)(43,ve,2,1,"p",25),n()()(),a(44,"div",10)(45,"div",11)(46,"div")(47,"h2",12),o(48,"Regional Preferences"),n(),a(49,"p",13),o(50,"Default currency, timezone, and language."),n()(),a(51,"div",14),p(52,Se,4,0,"button",15)(53,he,8,5),n()(),p(54,ye,4,1,"div",16),p(55,Ee,4,0,"div",17),a(56,"div",27)(57,"div")(58,"label",19),o(59,"Default Currency"),n(),p(60,Me,9,1,"select",28)(61,ke,2,1,"p",21),n(),a(62,"div")(63,"label",19),o(64,"Timezone"),n(),p(65,we,9,1,"select",28)(66,Pe,2,1,"p",21),n(),a(67,"div")(68,"label",19),o(69,"Language"),n(),p(70,Te,9,1,"select",28)(71,Oe,2,1,"p",21),n()()()()),t&2){let e=s();r(),y("border-slate-200",!e.profileState().editing)("dark:border-slate-800",!e.profileState().editing)("border-primary",e.profileState().editing)("ring-4",e.profileState().editing)("ring-primary/10",e.profileState().editing),r(8),m(e.profileState().editing?10:9),r(2),m(e.profileState().error?11:-1),r(),m(e.profileState().success?12:-1),r(5),m(e.profileState().editing?17:18),r(5),m(e.profileState().editing?22:23),r(5),m(e.profileState().editing?27:28),r(5),m(e.profileState().editing?32:33),r(5),m(e.profileState().editing?37:38),r(5),m(e.profileState().editing?42:43),r(2),y("border-slate-200",!e.regionalState().editing)("dark:border-slate-800",!e.regionalState().editing)("border-primary",e.regionalState().editing)("ring-4",e.regionalState().editing)("ring-primary/10",e.regionalState().editing),r(8),m(e.regionalState().editing?53:52),r(2),m(e.regionalState().error?54:-1),r(),m(e.regionalState().success?55:-1),r(5),m(e.regionalState().editing?60:61),r(5),m(e.regionalState().editing?65:66),r(5),m(e.regionalState().editing?70:71)}}function Re(t,i){if(t&1){let e=f();a(0,"button",29),u("click",function(){g(e);let l=s(2);return _(l.startEdit("rates"))}),a(1,"span",30),o(2,"edit"),n(),o(3,"Edit Rates "),n()}}function Ae(t,i){if(t&1){let e=f();a(0,"button",31),u("click",function(){g(e);let l=s(2);return _(l.cancelEdit("rates"))}),a(1,"span",30),o(2,"close"),n(),o(3,"Cancel "),n(),a(4,"button",32),u("click",function(){g(e);let l=s(2);return _(l.saveRates())}),a(5,"span",30),o(6),n(),o(7),n()}if(t&2){let e=s(2);r(4),x("disabled",e.ratesState().saving),r(),y("animate-spin",e.ratesState().saving),r(),h(" ",e.ratesState().saving?"refresh":"save"," "),r(),h(" ",e.ratesState().saving?"Saving\u2026":"Save Rates"," ")}}function De(t,i){if(t&1&&(a(0,"div",16)(1,"span",30),o(2,"error"),n(),o(3),n()),t&2){let e=s(2);r(3),h("",e.ratesState().error," ")}}function Ne(t,i){t&1&&(a(0,"div",17)(1,"span",30),o(2,"check_circle"),n(),o(3,"Service rates saved successfully. "),n())}function Le(t,i){t&1&&(a(0,"div",55),o(1," Loading service rates\u2026 "),n())}function Ie(t,i){if(t&1&&(a(0,"div",65)(1,"div",67)(2,"p",68),o(3,"Base Rate"),n(),a(4,"p",69),o(5),T(6,"number"),n()(),a(7,"div",67)(8,"p",68),o(9,"Per Kg"),n(),a(10,"p",69),o(11),T(12,"number"),n()(),a(13,"div",70)(14,"span",71)(15,"span",37),o(16),n()(),a(17,"span",64),o(18),n()()()),t&2){let e=s().$implicit;r(5),b(O(6,16,e.baseRate,"1.2-2")),r(6),b(O(12,19,e.perKg,"1.2-2")),r(3),y("bg-green-100",e.enabled)("dark:bg-green-900/40",e.enabled)("bg-slate-100",!e.enabled)("dark:bg-slate-800",!e.enabled),r(),y("text-green-600",e.enabled)("text-slate-400",!e.enabled),r(),h(" ",e.enabled?"check":"close"," "),r(2),b(e.enabled?"Active":"Inactive")}}function ze(t,i){if(t&1){let e=f();a(0,"div",66)(1,"div",1)(2,"label",72),o(3,"Base Rate ($)"),n(),a(4,"input",73),u("ngModelChange",function(l){g(e);let c=s().$implicit,E=s(3);return _(E.updateServiceField(c.id,"baseRate",l))}),n()(),a(5,"div",1)(6,"label",72),o(7,"Per Kg ($)"),n(),a(8,"input",73),u("ngModelChange",function(l){g(e);let c=s().$implicit,E=s(3);return _(E.updateServiceField(c.id,"perKg",l))}),n()(),a(9,"div",74)(10,"label",72),o(11,"Active"),n(),a(12,"label",75)(13,"input",76),u("ngModelChange",function(l){g(e);let c=s().$implicit,E=s(3);return _(E.updateServiceField(c.id,"enabled",l))}),n(),L(14,"div",77),n()()()}if(t&2){let e=s().$implicit;r(4),x("ngModel",e.baseRate),r(4),x("ngModel",e.perKg),r(5),x("ngModel",e.enabled)}}function Fe(t,i){if(t&1&&(a(0,"div",58)(1,"div",59)(2,"div",60)(3,"span",61),o(4),n()(),a(5,"div",62)(6,"h3",63),o(7),n(),a(8,"p",64),o(9),n()()(),p(10,Ie,19,22,"div",65),p(11,ze,15,3,"div",66),n()),t&2){let e=i.$implicit,d=s(3);y("opacity-40",!e.enabled&&!d.ratesState().editing),r(2),x("ngClass",I(8,te,e.iconBg,e.iconColor)),r(2),b(e.icon),r(3),b(e.title),r(2),b(e.subtitle),r(),m(d.ratesState().editing?-1:10),r(),m(d.ratesState().editing?11:-1)}}function Ue(t,i){if(t&1&&(a(0,"div",56),w(1,Fe,12,11,"div",57,ee),n()),t&2){let e=s(2);r(),P(e.serviceLevels())}}function Be(t,i){if(t&1&&(a(0,"div",7)(1,"div",10)(2,"div",11)(3,"div")(4,"h2",12),o(5,"Service Levels & Pricing"),n(),a(6,"p",13),o(7,"Base rates and per-kg multipliers for each service tier."),n()(),a(8,"div",14),p(9,Re,4,0,"button",15)(10,Ae,8,5),n()(),p(11,De,4,1,"div",16),p(12,Ne,4,0,"div",17),p(13,Le,2,0,"div",55)(14,Ue,3,0,"div",56),n()()),t&2){let e=s();r(),y("border-slate-200",!e.ratesState().editing)("dark:border-slate-800",!e.ratesState().editing)("border-primary",e.ratesState().editing)("ring-4",e.ratesState().editing)("ring-primary/10",e.ratesState().editing),r(8),m(e.ratesState().editing?10:9),r(2),m(e.ratesState().error?11:-1),r(),m(e.ratesState().success?12:-1),r(),m(e.isRatesLoading()?13:14)}}function We(t,i){t&1&&(a(0,"div",8)(1,"div",78)(2,"span",79),o(3,"construction"),n()(),a(4,"h3",80),o(5,"Under Construction"),n(),a(6,"p",81),o(7,"This section is being updated."),n()())}var V={standard:{title:"Standard Delivery",subtitle:"3\u20135 business days",icon:"local_shipping",iconColor:"text-blue-600",iconBg:"bg-blue-100 dark:bg-blue-900/30"},express:{title:"Express Delivery",subtitle:"1\u20132 business days",icon:"rocket_launch",iconColor:"text-purple-600",iconBg:"bg-purple-100 dark:bg-purple-900/30"},overnight:{title:"Overnight",subtitle:"Next day by 9 AM",icon:"bolt",iconColor:"text-amber-600",iconBg:"bg-amber-100 dark:bg-amber-900/30"}},R=class t{ratesApi=M(X);onboardingApi=M(Q);authService=M(B);activeTab=C("general");tabs=[{id:"general",label:"General"},{id:"rates_services",label:"Rates & Services"}];companyName=C("");companyDescription=C("");companyWebsite=C("");supportEmail=C("");supportPhone=C("");companyAddress=C("");currency=C("USD");timezone=C("America/Los_Angeles");language=C("en-US");currencyLabel=k(()=>({USD:"USD ($)",EUR:"EUR (\u20AC)",GBP:"GBP (\xA3)",CAD:"CAD ($)"})[this.currency()]??this.currency());timezoneLabel=k(()=>({"America/Los_Angeles":"Pacific Time (PT)","America/New_York":"Eastern Time (ET)",UTC:"UTC (GMT)","Europe/Paris":"Central European Time (CET)"})[this.timezone()]??this.timezone());languageLabel=k(()=>({"en-US":"English (US)","fr-FR":"French (FR)","es-ES":"Spanish (ES)","de-DE":"German (DE)"})[this.language()]??this.language());profileState=C({editing:!1,saving:!1,error:null,success:!1});regionalState=C({editing:!1,saving:!1,error:null,success:!1});ratesState=C({editing:!1,saving:!1,error:null,success:!1});profileSnapshot={};regionalSnapshot={};ratesSnapshot=[];serviceLevels=C([]);isRatesLoading=C(!1);ngOnInit(){this.loadCompanyProfile(),this.loadRates()}startEdit(i){i==="profile"?(this.profileSnapshot={companyName:this.companyName(),companyDescription:this.companyDescription(),companyWebsite:this.companyWebsite(),supportEmail:this.supportEmail(),supportPhone:this.supportPhone(),companyAddress:this.companyAddress()},this.profileState.set({editing:!0,saving:!1,error:null,success:!1})):i==="regional"?(this.regionalSnapshot={currency:this.currency(),timezone:this.timezone(),language:this.language()},this.regionalState.set({editing:!0,saving:!1,error:null,success:!1})):(this.ratesSnapshot=this.serviceLevels().map(e=>v({},e)),this.ratesState.set({editing:!0,saving:!1,error:null,success:!1}))}cancelEdit(i){i==="profile"?(this.companyName.set(this.profileSnapshot.companyName??""),this.companyDescription.set(this.profileSnapshot.companyDescription??""),this.companyWebsite.set(this.profileSnapshot.companyWebsite??""),this.supportEmail.set(this.profileSnapshot.supportEmail??""),this.supportPhone.set(this.profileSnapshot.supportPhone??""),this.companyAddress.set(this.profileSnapshot.companyAddress??""),this.profileState.set({editing:!1,saving:!1,error:null,success:!1})):i==="regional"?(this.currency.set(this.regionalSnapshot.currency??"USD"),this.timezone.set(this.regionalSnapshot.timezone??"America/Los_Angeles"),this.language.set(this.regionalSnapshot.language??"en-US"),this.regionalState.set({editing:!1,saving:!1,error:null,success:!1})):(this.serviceLevels.set(this.ratesSnapshot),this.ratesState.set({editing:!1,saving:!1,error:null,success:!1}))}loadCompanyProfile(){this.onboardingApi.apiOnboardingStatusGet().subscribe({next:i=>{let e=i?.companyProfile??{};this.companyName.set(e.organizationName??""),this.companyDescription.set(e.description??""),this.companyWebsite.set(e.corporateWebsite??""),this.supportEmail.set(e.supportEmail??""),this.supportPhone.set(e.supportPhone??""),this.companyAddress.set(e.headquartersAddress??""),this.currency.set(e.primaryLanguage==="fr-FR"?"EUR":"USD"),this.timezone.set("America/Los_Angeles"),this.language.set(e.primaryLanguage??"en-US")},error:()=>{}})}loadRates(){this.isRatesLoading.set(!0),this.ratesApi.apiRatesGet().subscribe({next:i=>{let e=this.mapRates(i);this.serviceLevels.set(e.length?e:this.defaultRates()),this.isRatesLoading.set(!1)},error:()=>{this.serviceLevels.set(this.defaultRates()),this.isRatesLoading.set(!1)}})}saveProfile(){this.profileState.update(i=>S(v({},i),{saving:!0,error:null,success:!1})),this.onboardingApi.apiOnboardingCompanyProfilePut({organizationName:this.companyName(),description:this.companyDescription(),corporateWebsite:this.companyWebsite(),supportEmail:this.supportEmail(),supportPhone:this.supportPhone(),headquartersAddress:this.companyAddress()}).subscribe({next:()=>{this.profileState.set({editing:!1,saving:!1,error:null,success:!0}),setTimeout(()=>this.profileState.update(i=>S(v({},i),{success:!1})),3e3)},error:i=>{this.profileState.update(e=>S(v({},e),{saving:!1,error:i?.error?.message??"Failed to save. Please try again."}))}})}saveRegional(){this.regionalState.update(i=>S(v({},i),{saving:!0,error:null,success:!1})),this.onboardingApi.apiOnboardingCompanyProfilePut({organizationName:this.companyName(),description:this.companyDescription(),corporateWebsite:this.companyWebsite(),supportEmail:this.supportEmail(),supportPhone:this.supportPhone(),headquartersAddress:this.companyAddress(),primaryLanguage:this.language()}).subscribe({next:()=>{this.regionalState.set({editing:!1,saving:!1,error:null,success:!0}),setTimeout(()=>this.regionalState.update(i=>S(v({},i),{success:!1})),3e3)},error:i=>{this.regionalState.update(e=>S(v({},e),{saving:!1,error:i?.error?.message??"Failed to save. Please try again."}))}})}saveRates(){this.ratesState.update(l=>S(v({},l),{saving:!0,error:null,success:!1}));let i=this.serviceLevels().filter(l=>!!l.rateId).map(l=>this.ratesApi.apiRatesRateIdPatch(l.rateId,{baseRate:l.baseRate,additionalKgRate:l.perKg}));if(!i.length){this.ratesState.set({editing:!1,saving:!1,error:null,success:!0}),setTimeout(()=>this.ratesState.update(l=>S(v({},l),{success:!1})),3e3);return}let e=0,d=!1;for(let l of i)l.subscribe({next:()=>{d||++e===i.length&&(this.ratesState.set({editing:!1,saving:!1,error:null,success:!0}),setTimeout(()=>this.ratesState.update(c=>S(v({},c),{success:!1})),3e3))},error:c=>{d||(d=!0,this.ratesState.update(E=>S(v({},E),{saving:!1,error:c?.error?.message??"Failed to save rates. Please try again."})))}})}updateServiceField(i,e,d){this.serviceLevels.update(l=>l.map(c=>c.id===i?S(v({},c),{[e]:d}):c))}mapRates(i){return this.extractArray(i).map(e=>this.mapRate(e))}mapRate(i){let e=this.isRecord(i)?i:{},l=(this.readString(e,["serviceType","type","name"],"standard")??"standard").toLowerCase(),c=V[l]??V.standard;return S(v({id:l,rateId:this.readString(e,["id","rateId"],void 0)},c),{baseRate:this.readNumber(e,["baseRate"],0),perKg:this.readNumber(e,["additionalKgRate","perKg","additionalPerKg"],0),enabled:this.readBoolean(e,["enabled","isActive"],!0)})}defaultRates(){return Object.entries(V).map(([i,e])=>S(v({id:i},e),{baseRate:i==="standard"?5:i==="express"?12:25,perKg:i==="standard"?.5:i==="express"?1.2:2.5,enabled:!0}))}extractArray(i){if(Array.isArray(i))return i;if(this.isRecord(i)){let e=[i.data,i.items,i.results].find(d=>Array.isArray(d));return Array.isArray(e)?e:[]}return[]}readNumber(i,e,d){for(let l of e){let c=i[l];if(typeof c=="number"&&Number.isFinite(c))return c;if(typeof c=="string"&&c.trim()!==""&&!Number.isNaN(Number(c)))return Number(c)}return d}readString(i,e,d){for(let l of e){let c=i[l];if(typeof c=="string"&&c.trim()!=="")return c}return d}readBoolean(i,e,d){for(let l of e){let c=i[l];if(typeof c=="boolean")return c}return d}isRecord(i){return typeof i=="object"&&i!==null}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=D({type:t,selectors:[["app-settings"]],decls:13,vars:3,consts:[[1,"mx-auto","w-full","max-w-5xl","flex","flex-col","gap-8","pb-12"],[1,"flex","flex-col","gap-1"],[1,"text-3xl","font-bold","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400"],[1,"border-b","border-slate-200","dark:border-slate-800"],["aria-label","Settings tabs",1,"-mb-px","flex","gap-8"],["type","button",1,"whitespace-nowrap","py-4","px-1","text-sm","font-medium","border-b-2","transition-colors",3,"border-primary","text-primary","border-transparent","text-slate-500"],[1,"flex","flex-col","gap-6"],[1,"flex","flex-col","items-center","justify-center","rounded-xl","border","border-slate-200","bg-white","p-12","text-center","dark:border-slate-800","dark:bg-slate-900"],["type","button",1,"whitespace-nowrap","py-4","px-1","text-sm","font-medium","border-b-2","transition-colors",3,"click"],[1,"rounded-xl","border","bg-white","shadow-sm","dark:bg-slate-900","transition-all"],[1,"flex","items-center","justify-between","px-6","pt-6","pb-4","border-b","border-slate-100","dark:border-slate-800"],[1,"text-lg","font-semibold","text-slate-900","dark:text-white"],[1,"text-sm","text-slate-500","dark:text-slate-400"],[1,"flex","items-center","gap-2"],["type","button",1,"btn-edit"],["role","alert",1,"alert","alert--error","mx-6","mt-4"],["role","status",1,"alert","alert--success","mx-6","mt-4"],[1,"grid","grid-cols-1","gap-5","p-6","md:grid-cols-2"],[1,"field-label"],["type","text","placeholder","e.g. Acme Corp",1,"field-input",3,"ngModel"],[1,"field-value"],[1,"relative"],[1,"md:col-span-2"],["rows","3","placeholder","Brief description\u2026",1,"field-input","resize-none",3,"ngModel"],[1,"field-value","whitespace-pre-line"],["rows","2","placeholder","Street, City, State, ZIP",1,"field-input","resize-none",3,"ngModel"],[1,"grid","grid-cols-1","gap-5","p-6","md:grid-cols-3"],[1,"field-input","appearance-none",3,"ngModel"],["type","button",1,"btn-edit",3,"click"],[1,"material-symbols-outlined","text-[16px]"],["type","button",1,"btn-cancel",3,"click"],["type","button",1,"btn-save",3,"click","disabled"],["type","text","placeholder","e.g. Acme Corp",1,"field-input",3,"ngModelChange","ngModel"],[1,"field-icon","material-symbols-outlined"],["type","url","placeholder","https://",1,"field-input","pl-9",3,"ngModelChange","ngModel"],["target","_blank","rel","noopener",1,"text-primary","hover:underline","inline-flex","items-center","gap-1",3,"href"],[1,"material-symbols-outlined","text-[13px]"],["rows","3","placeholder","Brief description\u2026",1,"field-input","resize-none",3,"ngModelChange","ngModel"],["type","email","placeholder","support@company.com",1,"field-input","pl-9",3,"ngModelChange","ngModel"],["type","tel","placeholder","+1 (555) 000-0000",1,"field-input","pl-9",3,"ngModelChange","ngModel"],["rows","2","placeholder","Street, City, State, ZIP",1,"field-input","resize-none",3,"ngModelChange","ngModel"],[1,"field-input","appearance-none",3,"ngModelChange","ngModel"],["value","USD"],["value","EUR"],["value","GBP"],["value","CAD"],["value","America/Los_Angeles"],["value","America/New_York"],["value","UTC"],["value","Europe/Paris"],["value","en-US"],["value","fr-FR"],["value","es-ES"],["value","de-DE"],[1,"m-6","rounded-lg","border","border-dashed","border-slate-200","bg-slate-50/50","p-8","text-center","text-sm","text-slate-500","dark:border-slate-800","dark:bg-slate-800/50","dark:text-slate-400"],[1,"flex","flex-col","divide-y","divide-slate-100","dark:divide-slate-800"],[1,"flex","items-center","justify-between","px-6","py-4","transition-opacity",3,"opacity-40"],[1,"flex","items-center","justify-between","px-6","py-4","transition-opacity"],[1,"flex","items-center","gap-4","min-w-0"],[1,"flex","h-11","w-11","shrink-0","items-center","justify-center","rounded-xl",3,"ngClass"],[1,"material-symbols-outlined"],[1,"min-w-0"],[1,"font-medium","text-slate-900","dark:text-white"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"flex","items-center","gap-8","shrink-0"],[1,"flex","items-center","gap-4","shrink-0"],[1,"text-right"],[1,"text-xs","text-slate-400","dark:text-slate-500"],[1,"text-sm","font-semibold","text-slate-900","dark:text-white"],[1,"flex","items-center","gap-1.5"],[1,"inline-flex","h-5","w-5","items-center","justify-center","rounded-full"],[1,"text-xs","font-medium","text-slate-400"],["type","number","min","0","step","0.01",1,"w-24","rounded-lg","border","border-slate-200","bg-white","px-3","py-1.5","text-sm","font-medium","text-slate-900","focus:border-primary","focus:outline-none","focus:ring-1","focus:ring-primary","dark:border-slate-700","dark:bg-slate-900","dark:text-white",3,"ngModelChange","ngModel"],[1,"flex","flex-col","items-center","gap-1"],[1,"relative","inline-flex","cursor-pointer","items-center"],["type","checkbox",1,"peer","sr-only",3,"ngModelChange","ngModel"],[1,"h-6","w-11","rounded-full","bg-slate-200","transition-colors","peer-checked:bg-primary","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-primary/20","dark:bg-slate-700","after:absolute","after:left-[2px]","after:top-[2px]","after:h-5","after:w-5","after:rounded-full","after:border","after:border-gray-300","after:bg-white","after:transition-all","after:content-['']","peer-checked:after:translate-x-full","peer-checked:after:border-white"],[1,"mx-auto","mb-4","flex","h-16","w-16","items-center","justify-center","rounded-full","bg-slate-100","dark:bg-slate-800"],[1,"material-symbols-outlined","text-3xl","text-slate-400"],[1,"text-lg","font-medium","text-slate-900","dark:text-white"],[1,"mt-1","text-slate-500","dark:text-slate-400"]],template:function(e,d){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Platform Settings"),n(),a(4,"p",3),o(5,"Configure operational parameters, rates, and platform branding."),n()(),a(6,"div",4)(7,"nav",5),w(8,ne,2,10,"button",6,ee),n()(),p(10,Ve,72,35,"div",7),p(11,Be,15,14,"div",7),p(12,We,8,0,"div",8),n()),e&2&&(r(8),P(d.tabs),r(2),m(d.activeTab()==="general"?10:-1),r(),m(d.activeTab()==="rates_services"?11:-1),r(),m(d.activeTab()!=="general"&&d.activeTab()!=="rates_services"?12:-1))},dependencies:[U,z,J,Y,Z,$,j,W,q,K,H,G,F],styles:[".field-label[_ngcontent-%COMP%]{display:block;margin-bottom:.375rem;font-size:.875rem;font-weight:500;color:#374151}.dark[_nghost-%COMP%]   .field-label[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .field-label[_ngcontent-%COMP%]{color:#94a3b8}.field-input[_ngcontent-%COMP%]{width:100%;border-radius:.5rem;border:1.5px solid #d1d5db;background:#f9fafb;padding:.5rem .75rem;font-size:.875rem;color:#111827;outline:none;transition:border-color .15s,box-shadow .15s;font-family:inherit;box-sizing:border-box}.field-input[_ngcontent-%COMP%]:focus{border-color:var(--color-primary, #3b82f6);box-shadow:0 0 0 3px #3b82f626}.dark[_nghost-%COMP%]   .field-input[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .field-input[_ngcontent-%COMP%]{background:#0f172a;border-color:#475569;color:#f1f5f9}.field-input.pl-9[_ngcontent-%COMP%]{padding-left:2.25rem}.field-icon[_ngcontent-%COMP%]{position:absolute;left:.6875rem;top:50%;transform:translateY(-50%);font-size:16px;color:#94a3b8;pointer-events:none}.field-value[_ngcontent-%COMP%]{font-size:.9375rem;color:#374151;padding:.375rem 0;margin:0;min-height:1.75rem;border-bottom:1.5px solid #f1f5f9}.dark[_nghost-%COMP%]   .field-value[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .field-value[_ngcontent-%COMP%]{color:#cbd5e1;border-bottom-color:#1e293b}.btn-edit[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.375rem;border-radius:.5rem;border:1px solid #e2e8f0;background:#fff;padding:.375rem .75rem;font-size:.875rem;font-weight:500;color:#374151;cursor:pointer;transition:background .15s}.btn-edit[_ngcontent-%COMP%]:hover{background:#f8fafc}.dark[_nghost-%COMP%]   .btn-edit[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#1e293b;border-color:#334155;color:#cbd5e1}.dark[_nghost-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover{background:#334155}.btn-cancel[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.375rem;border-radius:.5rem;border:1px solid #e2e8f0;background:#fff;padding:.375rem .75rem;font-size:.875rem;font-weight:500;color:#64748b;cursor:pointer;transition:background .15s}.btn-cancel[_ngcontent-%COMP%]:hover{background:#f8fafc}.dark[_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#1e293b;border-color:#334155;color:#94a3b8}.dark[_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#334155}.btn-save[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.375rem;border-radius:.5rem;border:none;background:var(--color-primary, #3b82f6);padding:.375rem 1rem;font-size:.875rem;font-weight:600;color:#fff;cursor:pointer;box-shadow:0 1px 4px #3b82f64d;transition:background .15s,opacity .15s}.btn-save[_ngcontent-%COMP%]:hover{background:#2563eb}.btn-save[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border-radius:.5rem;padding:.75rem 1rem;font-size:.875rem;margin-bottom:0}.alert--error[_ngcontent-%COMP%]{border:1px solid #fecaca;background:#fef2f2;color:#b91c1c}.alert--success[_ngcontent-%COMP%]{border:1px solid #bbf7d0;background:#f0fdf4;color:#166534}.dark[_nghost-%COMP%]   .alert--error[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .alert--error[_ngcontent-%COMP%]{border-color:#7f1d1d;background:#2d0b0b;color:#f87171}.dark[_nghost-%COMP%]   .alert--success[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .alert--success[_ngcontent-%COMP%]{border-color:#166534;background:#052e16;color:#4ade80}"],changeDetection:0})};export{R as default};
