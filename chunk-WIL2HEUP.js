import{a as z}from"./chunk-AQ7FFUGL.js";import{b as S,c,d as E,e as I,g as k,k as w,l as q,q as D,s as N}from"./chunk-5VRDLXRS.js";import{c as O}from"./chunk-TKVNSRWZ.js";import"./chunk-W2ZFWDSY.js";import"./chunk-GF7BQK6Q.js";import"./chunk-XAZ3CRE3.js";import{Ab as b,Ac as P,Bb as C,Eb as h,Ec as M,Gb as p,Pa as n,Rb as g,Tb as o,Ub as y,Vb as m,_ as f,_a as _,db as d,mb as x,tb as s,ub as r,vb as i,wb as u,zc as v}from"./chunk-JKZ4R3JY.js";import"./chunk-2NFLSA4Y.js";function T(e,l){if(e&1&&(r(0,"div",28)(1,"span",4),o(2,"check_circle"),i(),o(3),i()),e&2){let t=p();n(3),m(" ",t.successMessage," ")}}function L(e,l){if(e&1&&(r(0,"li"),o(1),i()),e&2){let t=l.$implicit;n(),y(t)}}function F(e,l){if(e&1&&(r(0,"ul",31),d(1,L,2,1,"li",32),i()),e&2){let t=p(2);n(),s("ngForOf",t.errorDetails)}}function V(e,l){if(e&1&&(r(0,"div",29)(1,"span",4),o(2,"error"),i(),r(3,"span"),o(4),d(5,F,2,1,"ul",30),i()()),e&2){let t=p();n(4),m(" ",t.error," "),n(),s("ngIf",t.errorDetails.length)}}function W(e,l){if(e&1&&(r(0,"p",33),o(1),i()),e&2){let t=p();n(),m(" ",t.firstError("organizationName")," ")}}function R(e,l){if(e&1&&(r(0,"p",33),o(1),i()),e&2){let t=p();n(),m(" ",t.firstError("corporateWebsite")," ")}}function j(e,l){if(e&1&&(r(0,"p",33),o(1),i()),e&2){let t=p();n(),m(" ",t.firstError("primaryLanguage")," ")}}function G(e,l){if(e&1&&(r(0,"p",33),o(1),i()),e&2){let t=p();n(),m(" ",t.firstError("description")," ")}}function U(e,l){if(e&1&&(r(0,"p",33),o(1),i()),e&2){let t=p();n(),m(" ",t.firstError("supportEmail")," ")}}function $(e,l){if(e&1&&(r(0,"p",33),o(1),i()),e&2){let t=p();n(),m(" ",t.firstError("supportPhone")," ")}}function B(e,l){if(e&1&&(r(0,"p",33),o(1),i()),e&2){let t=p();n(),m(" ",t.firstError("headquartersAddress")," ")}}function H(e,l){e&1&&(b(0),o(1,"Continue"),C())}function Y(e,l){e&1&&(b(0),r(1,"span",34),o(2,"refresh"),i(),o(3," Processing\u2026 "),C())}function K(e){if(!e.value)return null;try{return new URL(e.value),null}catch{return{url:"Enter a valid website URL (e.g. https://yourcompany.com)."}}}function J(e){return e.value?/^\+?[\d]{1}[\d\s\-().]{6,19}$/.test(e.value.trim())?null:{phone:"Enter a valid phone number (e.g. +1 555-123-4567)."}:null}var A=class e{fb=f(D);onboardingApi=f(z);router=f(O);loading=!1;error=null;errorDetails=[];successMessage=null;errorMessages={organizationName:{required:"Organization name is required."},corporateWebsite:{required:"Corporate website is required.",url:"Enter a valid website URL (e.g. https://yourcompany.com)."},primaryLanguage:{required:"Primary language is required."},description:{required:"Description is required."},supportEmail:{required:"Support email is required.",email:"Enter a valid email address."},supportPhone:{required:"Support phone is required.",phone:"Enter a valid phone number (e.g. +1 555-123-4567)."},headquartersAddress:{required:"Headquarters address is required."}};form=this.fb.nonNullable.group({organizationName:["",[c.required]],corporateWebsite:["",[c.required,K]],primaryLanguage:["",[c.required]],description:["",[c.required]],supportEmail:["",[c.required,c.email]],supportPhone:["",[c.required,J]],headquartersAddress:["",[c.required]]});isDirtyInvalid(l){let t=this.form.get(l);return!!t&&t.invalid&&(t.dirty||t.touched)}firstError(l){let t=this.form.get(l);if(!t?.errors)return"";let a=Object.keys(t.errors)[0];return this.errorMessages[l]?.[a]??`Invalid value (${a}).`}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.error=null,this.errorDetails=[],this.successMessage=null,this.onboardingApi.apiOnboardingCompanyProfilePut(this.form.getRawValue()).subscribe({next:()=>{this.loading=!1,this.successMessage="Company profile saved!",setTimeout(()=>this.router.navigate(["/onboarding/service-rates"]),800)},error:l=>{this.loading=!1;let t=l?.error;t?.details&&Array.isArray(t.details)?(this.error="Please correct the following:",this.errorDetails=t.details):this.error=t?.message??"Failed to save company profile. Please try again."}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=_({type:e,selectors:[["app-company-setup"]],decls:66,vars:28,consts:[[1,"page-shell"],[1,"card"],[1,"card-header"],[1,"icon-wrap"],[1,"material-symbols-outlined"],["class","banner banner--success","role","status",4,"ngIf"],["class","banner banner--error","role","alert",4,"ngIf"],["novalidate","",1,"form-body",3,"ngSubmit","formGroup"],[1,"field"],["for","organizationName"],["aria-hidden","true"],["id","organizationName","type","text","formControlName","organizationName","placeholder","e.g. Loomis Logistics","autocomplete","organization"],["class","field-error","role","alert",4,"ngIf"],["for","corporateWebsite"],["id","corporateWebsite","type","url","formControlName","corporateWebsite","placeholder","https://yourcompany.com","autocomplete","url"],["for","primaryLanguage"],["id","primaryLanguage","type","text","formControlName","primaryLanguage","placeholder","e.g. English"],["for","description"],["id","description","rows","3","formControlName","description","placeholder","Briefly describe your company"],[1,"field-row"],["for","supportEmail"],["id","supportEmail","type","email","formControlName","supportEmail","placeholder","support@yourcompany.com","autocomplete","email"],["for","supportPhone"],["id","supportPhone","type","tel","formControlName","supportPhone","placeholder","+1 555-123-4567","autocomplete","tel"],["for","headquartersAddress"],["id","headquartersAddress","type","text","formControlName","headquartersAddress","placeholder","123 Main St, City, Country","autocomplete","street-address"],["type","submit",1,"btn-submit",3,"disabled"],[4,"ngIf"],["role","status",1,"banner","banner--success"],["role","alert",1,"banner","banner--error"],["class","banner-list",4,"ngIf"],[1,"banner-list"],[4,"ngFor","ngForOf"],["role","alert",1,"field-error"],["aria-hidden","true",1,"material-symbols-outlined","spin"]],template:function(t,a){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),o(5,"business"),i()(),r(6,"h1"),o(7,"Company Setup"),i(),r(8,"p"),o(9,"Tell us about your organization to personalise your Loomis experience."),i()(),d(10,T,4,1,"div",5)(11,V,6,2,"div",6),r(12,"form",7),h("ngSubmit",function(){return a.submit()}),r(13,"div",8)(14,"label",9),o(15,"Organization Name "),r(16,"span",10),o(17,"*"),i()(),u(18,"input",11),d(19,W,2,1,"p",12),i(),r(20,"div",8)(21,"label",13),o(22,"Corporate Website "),r(23,"span",10),o(24,"*"),i()(),u(25,"input",14),d(26,R,2,1,"p",12),i(),r(27,"div",8)(28,"label",15),o(29,"Primary Language "),r(30,"span",10),o(31,"*"),i()(),u(32,"input",16),d(33,j,2,1,"p",12),i(),r(34,"div",8)(35,"label",17),o(36,"Description "),r(37,"span",10),o(38,"*"),i()(),u(39,"textarea",18),d(40,G,2,1,"p",12),i(),r(41,"div",19)(42,"div",8)(43,"label",20),o(44,"Support Email "),r(45,"span",10),o(46,"*"),i()(),u(47,"input",21),d(48,U,2,1,"p",12),i(),r(49,"div",8)(50,"label",22),o(51,"Support Phone "),r(52,"span",10),o(53,"*"),i()(),u(54,"input",23),d(55,$,2,1,"p",12),i()(),r(56,"div",8)(57,"label",24),o(58,"Headquarters Address "),r(59,"span",10),o(60,"*"),i()(),u(61,"input",25),d(62,B,2,1,"p",12),i(),r(63,"button",26),d(64,H,2,0,"ng-container",27)(65,Y,4,0,"ng-container",27),i()()()()),t&2&&(n(10),s("ngIf",a.successMessage),n(),s("ngIf",a.error),n(),s("formGroup",a.form),n(6),g("input--invalid",a.isDirtyInvalid("organizationName")),n(),s("ngIf",a.isDirtyInvalid("organizationName")),n(6),g("input--invalid",a.isDirtyInvalid("corporateWebsite")),n(),s("ngIf",a.isDirtyInvalid("corporateWebsite")),n(6),g("input--invalid",a.isDirtyInvalid("primaryLanguage")),n(),s("ngIf",a.isDirtyInvalid("primaryLanguage")),n(6),g("input--invalid",a.isDirtyInvalid("description")),n(),s("ngIf",a.isDirtyInvalid("description")),n(7),g("input--invalid",a.isDirtyInvalid("supportEmail")),n(),s("ngIf",a.isDirtyInvalid("supportEmail")),n(6),g("input--invalid",a.isDirtyInvalid("supportPhone")),n(),s("ngIf",a.isDirtyInvalid("supportPhone")),n(6),g("input--invalid",a.isDirtyInvalid("headquartersAddress")),n(),s("ngIf",a.isDirtyInvalid("headquartersAddress")),n(),s("disabled",a.loading),x("aria-busy",a.loading),n(),s("ngIf",!a.loading),n(),s("ngIf",a.loading))},dependencies:[M,v,P,N,k,S,E,I,q,w],styles:[".page-shell[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#f8fafc,#e2e8f0);padding:2rem 1rem}.dark[_nghost-%COMP%]   .page-shell[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .page-shell[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f172a,#1e293b)}.card[_ngcontent-%COMP%]{width:100%;max-width:560px;background:#fff;border-radius:1.25rem;box-shadow:0 20px 40px #00000014;border:1px solid #e2e8f0;padding:2.5rem}.dark[_nghost-%COMP%]   .card[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .card[_ngcontent-%COMP%]{background:#1e293b;border-color:#334155;box-shadow:0 20px 40px #0006}.card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;margin-bottom:2rem}.icon-wrap[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background:#eff6ff;display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.dark[_nghost-%COMP%]   .icon-wrap[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .icon-wrap[_ngcontent-%COMP%]{background:#1e3a5f}.icon-wrap[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:28px;color:#3b82f6}.card-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:800;color:#0f172a;margin:0 0 .4rem;letter-spacing:-.025em}.dark[_nghost-%COMP%]   .card-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .card-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#f1f5f9}.card-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin:0}.banner[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.625rem;border-radius:.75rem;padding:.875rem 1rem;font-size:.875rem;margin-bottom:1.25rem}.banner--success[_ngcontent-%COMP%]{background:#f0fdf4;color:#166534;border:1px solid #bbf7d0}.banner--error[_ngcontent-%COMP%]{background:#fef2f2;color:#991b1b;border:1px solid #fecaca}.dark[_nghost-%COMP%]   .banner--success[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .banner--success[_ngcontent-%COMP%]{background:#052e16;color:#4ade80;border-color:#166534}.dark[_nghost-%COMP%]   .banner--error[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .banner--error[_ngcontent-%COMP%]{background:#2d0b0b;color:#f87171;border-color:#7f1d1d}.banner[_ngcontent-%COMP%]   .material-symbols-outlined[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0;margin-top:1px}.banner-list[_ngcontent-%COMP%]{margin:.5rem 0 0 1rem;padding:0}.form-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.375rem;flex:1}.field-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.25rem}@media(max-width:480px){.field-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#374151}.dark[_nghost-%COMP%]   label[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   label[_ngcontent-%COMP%]{color:#cbd5e1}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ef4444;margin-left:2px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;border-radius:.625rem;border:1.5px solid #d1d5db;background:#f9fafb;padding:.6rem .875rem;font-size:.9375rem;color:#111827;transition:border-color .15s,box-shadow .15s;outline:none;resize:vertical;box-sizing:border-box;font-family:inherit}.dark[_nghost-%COMP%]   input[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%], .dark[_nghost-%COMP%]   textarea[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{background:#0f172a;border-color:#475569;color:#f1f5f9}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f626}.input--invalid[_ngcontent-%COMP%]{border-color:#ef4444!important;box-shadow:0 0 0 3px #ef44441a!important}.field-error[_ngcontent-%COMP%]{font-size:.75rem;color:#dc2626;margin:0}.dark[_nghost-%COMP%]   .field-error[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .field-error[_ngcontent-%COMP%]{color:#f87171}.btn-submit[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:.5rem;background:#3b82f6;color:#fff;font-weight:700;font-size:1rem;padding:.8125rem 1rem;border-radius:.75rem;border:none;cursor:pointer;transition:background .2s,transform .1s,box-shadow .2s;box-shadow:0 4px 14px #3b82f659;margin-top:.25rem}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;transform:translateY(-1px);box-shadow:0 6px 20px #3b82f666}.btn-submit[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed;box-shadow:none}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin .75s linear infinite;font-size:18px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{A as CompanySetupComponent};
