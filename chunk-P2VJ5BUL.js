import{b as se}from"./chunk-XFNDSNIK.js";import"./chunk-QRB52CVI.js";import"./chunk-GFU3UW6A.js";import"./chunk-RHAMT7CE.js";import"./chunk-ZYQ7KRKH.js";import{d as ne,f as ie,m as ae,n as re,o as oe,r as le}from"./chunk-5VRDLXRS.js";import"./chunk-TZMPXKHX.js";import"./chunk-OFIQSEYL.js";import"./chunk-GF7BQK6Q.js";import"./chunk-XAZ3CRE3.js";import{Ab as _,Ac as k,Bb as b,Cb as Y,Eb as z,Ec as te,Gb as c,Pa as l,Pb as v,Qb as J,Rb as G,Tb as n,Ub as E,Vb as y,Yb as Q,Zb as X,_ as H,_a as W,_b as Z,da as w,db as h,ea as P,eb as T,hc as C,jc as ee,kb as M,lb as N,nb as L,oa as u,pb as V,rb as A,sb as $,tb as d,ub as i,vb as t,wb as g}from"./chunk-JKZ4R3JY.js";import"./chunk-2NFLSA4Y.js";function de(){let e=H(se),r=u(7),a=u(!0),s=u(!0),x=u(0),D=u([{title:"Customers Handled",value:"-",change:"0%",trend:"up",icon:"support_agent",loading:!0},{title:"Pending Pickups",value:"-",change:"0%",trend:"up",icon:"inventory_2",loading:!0},{title:"Completed Shipments",value:"-",change:"0%",trend:"up",icon:"check_circle",loading:!0}]),f=u({labels:[],datasets:[]}),F=u({labels:[],datasets:[]}),O=u([]),me=ee(()=>a()||s());function pe(){e.getUrgentInquiries().subscribe({next:o=>{x.set(o.open??0)},error:()=>x.set(0)}),e.getMetrics().subscribe({next:o=>{D.set([{title:"Customers Handled",value:o.inquiriesHandledToday.toString(),change:`${o.trends.inquiries>=0?"+":""}${o.trends.inquiries}%`,trend:o.trends.inquiries>=0?"up":"down",icon:"support_agent"},{title:"Pending Pickups",value:o.pendingShipments.toString(),change:"+2.4%",trend:"up",icon:"inventory_2"},{title:"Completed Shipments",value:o.deliveredToday.toString(),change:`${o.trends.shipments>=0?"+":""}${o.trends.shipments}%`,trend:o.trends.shipments>=0?"up":"down",icon:"check_circle"}])}})}function j(){a.set(!0),e.getInquiryVolume(r()).subscribe({next:o=>{let m=o.map(S=>new Date(S.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),p=o.map(S=>S.count);f.set({labels:m,datasets:[{label:"Inquiries",data:p,borderColor:"#6324eb",backgroundColor:"rgba(99, 36, 235, 0.1)",fill:!0,tension:.4}]}),a.set(!1)}})}function ce(){s.set(!0),e.getInquiryPurposeBreakdown().subscribe({next:o=>{F.set({labels:o.map(m=>m.purpose),datasets:[{data:o.map(m=>m.count),backgroundColor:["#6324eb","#a855f7","#ec4899","#ef4444","#f59e0b"]}]}),s.set(!1)}})}function ue(){e.getRecentActivity(10).subscribe({next:o=>{let m=o.map(p=>({id:p.id,trackingNumber:p.title,customer:p.description,status:p.status,statusColor:U(p.status),time:B(p.timestamp)}));O.set(m)}})}function ge(){pe(),j(),ce(),ue()}function xe(o){r.set(o),j()}function U(o){return{resolved:"#10b981",pending:"#f59e0b",in_progress:"#3b82f6",open:"#6366f1",closed:"#6b7280",in_transit:"#10b981",delivered:"#10b981",cancelled:"#ef4444",delayed:"#f59e0b"}[o]||"#6b7280"}function B(o){let m=new Date,p=new Date(o),S=m.getTime()-p.getTime(),q=Math.floor(S/6e4),I=Math.floor(q/60),K=Math.floor(I/24);return q<1?"Just now":q<60?`${q} min ago`:I<24?`${I} hour${I>1?"s":""} ago`:`${K} day${K>1?"s":""} ago`}return{inquiryPeriodSignal:r,isLoadingInquiryVolume:a,isLoadingInquiryPurpose:s,urgentInquiriesCount:x,kpiCards:D,inquiryVolumeData:f,inquiryPurposeData:F,recentActivities:O,isLoading:me,loadAllData:ge,updateInquiryPeriod:xe,getStatusColor:U,formatTime:B}}var fe=()=>[k,import("./chunk-ZQBJKDCK.js").then(e=>e.LineChartComponent),import("./chunk-ZQBJKDCK.js").then(e=>e.LoadingSpinnerComponent)],he=()=>[k,import("./chunk-ZQBJKDCK.js").then(e=>e.PieChartComponent),import("./chunk-ZQBJKDCK.js").then(e=>e.LoadingSpinnerComponent)],_e=(e,r)=>r.title,be=(e,r)=>r.id;function ve(e,r){if(e&1&&(_(0),n(1),b()),e&2){let a=c();l(),y(" ",a.urgentInquiriesCount()," Urgent Inquiries ")}}function ye(e,r){e&1&&(i(0,"span",34)(1,"span",35),n(2,"check_circle"),t(),n(3,"All caught up!"),t())}function Ce(e,r){e&1&&(_(0),n(1," Customers waiting for response. View details in inquiries tab to call them directly. "),b())}function De(e,r){e&1&&n(0," No urgent actions required. ")}function Se(e,r){if(e&1&&(_(0),i(1,"h3",39),n(2),t(),i(3,"p",40)(4,"span",41),n(5),t(),n(6),t(),b()),e&2){let a=c().$implicit;l(2),E(a.value),l(),G("text-green-600",a.trend==="up")("text-red-600",a.trend==="down"),l(2),y(" ",a.trend==="up"?"trending_up":"trending_down"," "),l(),y(" ",a.change," ")}}function Ee(e,r){e&1&&(i(0,"h3",42),n(1,"No data yet"),t(),i(2,"p",43),n(3,"Awaiting activity"),t())}function qe(e,r){if(e&1&&(i(0,"div",17)(1,"div",9)(2,"span",36),n(3),t(),i(4,"div",37)(5,"span",38),n(6),t()()(),i(7,"div",13),h(8,Se,7,7,"ng-container",15)(9,Ee,4,0,"ng-template",null,3,C),t()()),e&2){let a=r.$implicit,s=v(10);l(3),E(a.title),l(3),E(a.icon),l(2),d("ngIf",a.value!=="-"&&a.value!=="0")("ngIfElse",s)}}function Ie(e,r){e&1&&(i(0,"div",44),g(1,"app-loading-spinner",45),t())}function ke(e,r){if(e&1&&(_(0),g(1,"app-line-chart",46),b()),e&2){let a=c(3);l(),d("data",a.inquiryVolumeData())}}function we(e,r){e&1&&(i(0,"div",47)(1,"span",48),n(2,"insights"),t(),i(3,"div"),n(4,"No inquiries yet."),g(5,"br"),n(6,"Your activity will appear here."),t()())}function Pe(e,r){if(e&1&&h(0,ke,2,1,"ng-container",15)(1,we,7,0,"ng-template",null,4,C),e&2){let a=v(2),s=c(2);d("ngIf",s.inquiryVolumeData().datasets.length>0&&s.inquiryVolumeData().datasets[0].data.length>0)("ngIfElse",a)}}function Te(e,r){if(e&1&&L(0,Ie,2,0,"div",44)(1,Pe,3,2),e&2){let a=c();V(a.isLoadingInquiryVolume()?0:1)}}function Me(e,r){e&1&&(i(0,"div",44)(1,"div",49),n(2,"Loading chart..."),t()())}function Ne(e,r){e&1&&(i(0,"div",44),g(1,"app-loading-spinner",45),t())}function Le(e,r){if(e&1&&(_(0),g(1,"app-pie-chart",46),b()),e&2){let a=c(3);l(),d("data",a.inquiryPurposeData())}}function Ve(e,r){e&1&&(i(0,"div",47)(1,"span",48),n(2,"pie_chart"),t(),i(3,"div"),n(4,"No support requests yet."),g(5,"br"),n(6,"Breakdown will appear here."),t()())}function Ae(e,r){if(e&1&&h(0,Le,2,1,"ng-container",15)(1,Ve,7,0,"ng-template",null,5,C),e&2){let a=v(2),s=c(2);d("ngIf",s.inquiryPurposeData().datasets.length>0&&s.inquiryPurposeData().datasets[0].data.length>0)("ngIfElse",a)}}function $e(e,r){if(e&1&&L(0,Ne,2,0,"div",44)(1,Ae,3,2),e&2){let a=c();V(a.isLoadingInquiryPurpose()?0:1)}}function Re(e,r){e&1&&(i(0,"div",44)(1,"div",49),n(2,"Loading chart..."),t()())}function Fe(e,r){if(e&1&&(i(0,"tr",50)(1,"td",51)(2,"div",52)(3,"div",53)(4,"span",54),n(5,"support_agent"),t()(),i(6,"span",55),n(7),t()()(),i(8,"td",56),n(9),t(),i(10,"td",51)(11,"span",57),n(12),t()(),i(13,"td",58),n(14),t()()),e&2){let a=r.$implicit;l(7),E(a.trackingNumber),l(2),y(" ",a.customer," "),l(2),J("background-color",a.statusColor+"20")("color",a.statusColor),l(),y(" ",a.status," "),l(2),y(" ",a.time," ")}}function Oe(e,r){if(e&1&&(_(0),A(1,Fe,15,8,"tr",50,be),b()),e&2){let a=c();l(),$(a.recentActivities())}}function je(e,r){e&1&&(i(0,"tr")(1,"td",59)(2,"span",60),n(3,"support_agent"),t(),g(4,"br"),n(5," No customer inquiries yet."),g(6,"br"),n(7,"Your latest support interactions will appear here. "),t()())}var R=class e{dashboard=de();inquiryPeriod=7;urgentInquiriesCount=this.dashboard.urgentInquiriesCount;kpiCards=this.dashboard.kpiCards;isLoadingInquiryVolume=this.dashboard.isLoadingInquiryVolume;isLoadingInquiryPurpose=this.dashboard.isLoadingInquiryPurpose;inquiryVolumeData=this.dashboard.inquiryVolumeData;inquiryPurposeData=this.dashboard.inquiryPurposeData;recentActivities=this.dashboard.recentActivities;ngOnInit(){this.dashboard.loadAllData()}onInquiryPeriodChange(){this.dashboard.updateInquiryPeriod(this.inquiryPeriod)}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=W({type:e,selectors:[["app-dashboard"]],decls:76,vars:10,consts:[["allClear",""],["noUrgentMsg",""],["emptyTable",""],["emptyKpi",""],["emptyChart",""],["emptyPie",""],[1,"mx-auto","flex","w-full","max-w-7xl","flex-col","gap-8"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-2","lg:grid-cols-4"],[1,"flex","flex-col","gap-4","rounded-xl","border","border-slate-200","bg-white","p-6","dark:border-slate-800","dark:bg-slate-900","transition-all","hover:shadow-lg","cursor-pointer","group","border-l-4","border-l-red-500"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-red-600","dark:text-red-400"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-lg","bg-red-50","dark:bg-red-900/20","group-hover:bg-red-100","dark:group-hover:bg-red-900/30","transition-colors"],[1,"material-symbols-outlined","text-red-600","dark:text-red-400"],[1,"flex","flex-col","gap-1"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[4,"ngIf","ngIfElse"],[1,"text-xs","text-slate-500","dark:text-slate-400","line-clamp-2"],[1,"flex","flex-col","gap-4","rounded-xl","border","border-slate-200","bg-white","p-6","dark:border-slate-800","dark:bg-slate-900","transition-all","hover:shadow-lg"],[1,"flex","flex-col","gap-6"],[1,"flex","flex-col"],[1,"text-xl","font-bold","text-slate-900","dark:text-white"],[1,"text-sm","text-slate-500","dark:text-slate-400"],[1,"flex","items-center","gap-2"],[1,"rounded-lg","border","border-slate-200","bg-white","px-3","py-1.5","text-sm","text-slate-700","hover:bg-slate-50","dark:border-slate-800","dark:bg-slate-900","dark:text-slate-300","dark:hover:bg-slate-800",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"grid","grid-cols-1","gap-6","lg:grid-cols-2"],[1,"flex","flex-col","gap-4","rounded-xl","border","border-slate-200","bg-white","p-6","dark:border-slate-800","dark:bg-slate-900"],[1,"text-lg","font-semibold","text-slate-900","dark:text-white"],[1,"overflow-x-auto"],[1,"w-full","text-left","text-sm"],[1,"border-b","border-slate-200","dark:border-slate-700"],[1,"px-4","py-3","font-medium","text-slate-500","dark:text-slate-400"],[1,"px-4","py-3","font-medium","text-slate-500","dark:text-slate-400","text-right"],[1,"divide-y","divide-slate-100","dark:divide-slate-800"],[1,"text-green-600","flex","items-center","gap-1"],[1,"material-symbols-outlined","text-green-600"],[1,"text-sm","font-medium","text-slate-500","dark:text-slate-400"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-lg","bg-slate-50","dark:bg-slate-800"],[1,"material-symbols-outlined","text-slate-400"],[1,"text-3xl","font-bold","text-slate-900","dark:text-white"],[1,"flex","items-center","gap-1","text-sm"],[1,"material-symbols-outlined","text-[16px]"],[1,"text-3xl","font-bold","text-slate-400","dark:text-slate-600"],[1,"text-xs","text-slate-400","dark:text-slate-500"],[1,"flex","h-64","items-center","justify-center"],["size","md"],["height","300px",3,"data"],[1,"flex","flex-col","items-center","justify-center","h-64","text-slate-400"],[1,"material-symbols-outlined","text-5xl","mb-2"],[1,"text-slate-400"],[1,"group","hover:bg-slate-50","dark:hover:bg-slate-800/50","transition-colors","cursor-pointer"],[1,"px-4","py-3"],[1,"flex","items-center","gap-3"],[1,"flex","h-8","w-8","items-center","justify-center","rounded-lg","bg-primary/10"],[1,"material-symbols-outlined","text-sm","text-primary"],[1,"font-medium","text-slate-900","dark:text-white"],[1,"px-4","py-3","text-slate-600","dark:text-slate-300"],[1,"inline-flex","items-center","px-2","py-0.5","rounded-full","text-xs","font-medium"],[1,"px-4","py-3","text-right","text-slate-500","dark:text-slate-400"],["colspan","4",1,"py-8","text-center","text-slate-400"],[1,"material-symbols-outlined","text-3xl","mb-2"]],template:function(a,s){if(a&1){let x=Y();i(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"span",10),n(5,"Immediate Action"),t(),i(6,"div",11)(7,"span",12),n(8,"phone_callback"),t()()(),i(9,"div",13)(10,"h3",14),h(11,ve,2,1,"ng-container",15)(12,ye,4,0,"ng-template",null,0,C),t(),i(14,"p",16),h(15,Ce,2,0,"ng-container",15)(16,De,1,0,"ng-template",null,1,C),t()()(),A(18,qe,11,4,"div",17,_e),t(),i(20,"section",18)(21,"div",9)(22,"div",19)(23,"h2",20),n(24,"Customer Support Overview"),t(),i(25,"p",21),n(26,"Analysis of inquiries and interactions"),t()(),i(27,"div",22)(28,"select",23),Z("ngModelChange",function(f){return w(x),X(s.inquiryPeriod,f)||(s.inquiryPeriod=f),P(f)}),z("change",function(){return w(x),P(s.onInquiryPeriodChange())}),i(29,"option",24),n(30,"Last 7 days"),t(),i(31,"option",24),n(32,"Last 30 days"),t(),i(33,"option",24),n(34,"Last 90 days"),t()()()(),i(35,"div",25)(36,"div",26)(37,"h3",27),n(38,"Inquiries Volume"),t(),i(39,"p",21),n(40,"Daily inquiries handled over time"),t(),T(41,Te,2,1)(42,Me,3,0),M(43,41,fe,null,42),N(0,-1),t(),i(45,"div",26)(46,"h3",27),n(47,"Inquiry Purpose"),t(),i(48,"p",21),n(49,"Breakdown of support request types"),t(),T(50,$e,2,1)(51,Re,3,0),M(52,50,he,null,51),N(0,-1),t()()(),i(54,"div",26)(55,"div")(56,"h3",27),n(57,"Recent Customer Inquiries"),t(),i(58,"p",21),n(59,"Latest support interactions"),t()(),i(60,"div",28)(61,"table",29)(62,"thead",30)(63,"tr")(64,"th",31),n(65,"Tracking ID"),t(),i(66,"th",31),n(67,"Customer"),t(),i(68,"th",31),n(69,"Status"),t(),i(70,"th",32),n(71,"Time"),t()()(),i(72,"tbody",33),h(73,Oe,3,0,"ng-container",15)(74,je,8,0,"ng-template",null,2,C),t()()()()()}if(a&2){let x=v(13),D=v(17),f=v(75);l(11),d("ngIf",s.urgentInquiriesCount()>0)("ngIfElse",x),l(4),d("ngIf",s.urgentInquiriesCount()>0)("ngIfElse",D),l(3),$(s.kpiCards()),l(10),Q("ngModel",s.inquiryPeriod),l(),d("value",7),l(2),d("value",30),l(2),d("value",90),l(40),d("ngIf",s.recentActivities().length>0)("ngIfElse",f)}},dependencies:[te,k,le,re,oe,ae,ne,ie],encapsulation:2,changeDetection:0})},Ze=R;export{R as DashboardComponent,Ze as default};
