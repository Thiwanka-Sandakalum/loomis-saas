import{b as W}from"./chunk-RLQ6OS3V.js";import{d as R}from"./chunk-L5L2J3WM.js";import"./chunk-44UDLAS5.js";import"./chunk-SYB5CXAL.js";import"./chunk-XFNDSNIK.js";import"./chunk-QRB52CVI.js";import"./chunk-GFU3UW6A.js";import{a as $}from"./chunk-RHAMT7CE.js";import{a as B}from"./chunk-6JD6GA7W.js";import"./chunk-ZYQ7KRKH.js";import{b as L,d as V,f as z,m as A,n as Q,o as j,r as O}from"./chunk-5VRDLXRS.js";import"./chunk-TZMPXKHX.js";import{d as D}from"./chunk-TKVNSRWZ.js";import"./chunk-W2ZFWDSY.js";import"./chunk-OFIQSEYL.js";import"./chunk-GF7BQK6Q.js";import"./chunk-XAZ3CRE3.js";import{Cb as k,Eb as d,Ec as N,Gb as u,Pa as o,Rb as x,Tb as n,Ub as w,Vb as h,Wb as S,_ as F,_a as q,bc as y,da as b,dc as T,ea as _,ec as P,jc as f,nb as v,oa as m,pb as C,rb as E,sb as M,tb as g,ub as t,vb as i,wb as c}from"./chunk-JKZ4R3JY.js";import"./chunk-2NFLSA4Y.js";var G=l=>["/inquiries",l],K=(l,a)=>a.id;function U(l,a){l&1&&(t(0,"div",23),c(1,"app-loading-spinner",26),i())}function X(l,a){l&1&&c(0,"app-empty-state",24)}function Y(l,a){l&1&&c(0,"div",45)}function Z(l,a){l&1&&c(0,"div",46)}function ee(l,a){l&1&&c(0,"div",47)}function te(l,a){l&1&&c(0,"div",48)}function ie(l,a){if(l&1){let r=k();t(0,"button",65),d("click",function(){b(r);let s=u().$implicit,p=u(2);return _(p.assignInquiry(s.id))}),n(1," [Assign to CSR] "),i()}}function ne(l,a){if(l&1){let r=k();t(0,"button",66),d("click",function(){b(r);let s=u().$implicit,p=u(2);return _(p.escalateInquiry(s.id))}),n(1," [Escalate] "),i()}}function ae(l,a){if(l&1&&(t(0,"a",61),n(1," [View Details] "),i()),l&2){let r=u().$implicit;g("routerLink",y(1,G,r.id))}}function re(l,a){if(l&1&&(t(0,"tr",36)(1,"td",44)(2,"div",38),v(3,Y,1,0,"div",45)(4,Z,1,0,"div",46)(5,ee,1,0,"div",47)(6,te,1,0,"div",48),t(7,"span",49),n(8),i()()(),t(9,"td",44)(10,"div",50)(11,"span",51),n(12),i(),t(13,"span",52),n(14),i()()(),t(15,"td",44)(16,"div",53)(17,"p",54),n(18),i(),t(19,"div",55)(20,"span",56),n(21),i(),t(22,"div",57)(23,"a",58),n(24," [View Conversation] "),i(),v(25,ie,2,0,"button",59)(26,ne,2,0,"button",60)(27,ae,2,3,"a",61),i()()()(),t(28,"td",44)(29,"div",38)(30,"span",62),n(31),i()()(),t(32,"td",63)(33,"span",64),n(34),T(35,"timeAgo"),i()()()),l&2){let r,e=a.$implicit;o(3),C((r=e.status)==="open"?3:r==="pending"?4:r==="resolved"?5:r==="closed"?6:-1),o(5),h(" ",e.status," "),o(4),w(e.customerName),o(2),w(e.customerPhone||"N/A"),o(4),h(' "',e.messagePreview,'" '),o(3),h(" ",e.id.substring(0,8)," "),o(2),g("routerLink",y(12,G,e.id)),o(2),C(e.status==="open"?25:e.status==="pending"?26:27),o(6),h(" ",e.channel," "),o(3),h(" ",P(35,10,e.createdAt)," ")}}function le(l,a){if(l&1){let r=k();t(0,"div",25)(1,"div",27)(2,"table",28)(3,"thead")(4,"tr",29)(5,"th",30),n(6,"Status"),i(),t(7,"th",31),n(8,"Customer"),i(),t(9,"th",32),n(10,"Message Preview"),i(),t(11,"th",33),n(12,"Channel"),i(),t(13,"th",34),n(14,"Time"),i()()(),t(15,"tbody",35),E(16,re,36,14,"tr",36,K),i()()(),t(18,"div",37)(19,"div",38)(20,"button",39),d("click",function(){b(r);let s=u();return _(s.previousPage())}),t(21,"span",40),n(22,"chevron_left"),i()(),t(23,"span",41),n(24),i(),t(25,"button",39),d("click",function(){b(r);let s=u();return _(s.nextPage())}),t(26,"span",40),n(27,"chevron_right"),i()()(),t(28,"p",42),n(29," Showing "),t(30,"span",43),n(31),i(),n(32," of "),t(33,"span",43),n(34),i()()()()}if(l&2){let r=u();o(16),M(r.filteredInquiries()),o(4),g("disabled",r.page()<=1),o(4),S(" Page ",r.page()," of ",r.totalPages()," "),o(),g("disabled",r.page()>=r.totalPages()),o(6),S("",r.rangeStart(),"-",r.rangeEnd()),o(3),w(r.totalItems())}}var I=class l{inquiryService=F($);inquiries=m([]);isLoading=m(!1);totalItems=m(0);page=m(1);pageSize=m(20);channelFilter=m("");statusFilter=m("");searchQuery=m("");filteredInquiries=f(()=>{let a=this.channelFilter(),r=this.statusFilter(),e=this.searchQuery().toLowerCase();return this.inquiries().filter(s=>{let p=!a||s.channel===a,H=!r||s.status===r,J=!e||s.customerName.toLowerCase().includes(e)||s.id.toLowerCase().includes(e)||s.messagePreview.toLowerCase().includes(e);return p&&H&&J})});totalPages=f(()=>Math.max(1,Math.ceil(this.totalItems()/this.pageSize())));rangeStart=f(()=>this.totalItems()===0?0:(this.page()-1)*this.pageSize()+1);rangeEnd=f(()=>Math.min(this.page()*this.pageSize(),this.totalItems()));ngOnInit(){this.loadInquiries()}loadInquiries(){this.isLoading.set(!0),this.inquiryService.getInquiries({page:this.page(),pageSize:this.pageSize(),channel:this.channelFilter()?this.channelFilter():"all",status:this.statusFilter()?this.statusFilter():"all",searchQuery:this.searchQuery()}).subscribe({next:a=>{this.inquiries.set(a.data),this.totalItems.set(a.pagination.totalItems),this.page.set(a.pagination.page),this.pageSize.set(a.pagination.pageSize),this.isLoading.set(!1)},error:a=>{console.error("Failed to load inquiries:",a),this.isLoading.set(!1)}})}onStatusChange(a){this.statusFilter.set(a),this.page.set(1),this.loadInquiries()}setChannelFilter(a){this.channelFilter()===a?this.channelFilter.set(""):this.channelFilter.set(a),this.page.set(1),this.loadInquiries()}goToPage(a){a<1||a>this.totalPages()||(this.page.set(a),this.loadInquiries())}nextPage(){this.goToPage(this.page()+1)}previousPage(){this.goToPage(this.page()-1)}assignInquiry(a){console.log("Assigning inquiry:",a)}escalateInquiry(a){console.log("Escalating inquiry:",a)}exportData(){console.log("Exporting data...")}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=q({type:l,selectors:[["app-inquiries"]],decls:47,vars:57,consts:[[1,"mx-auto","w-full","max-w-7xl","flex","flex-col","gap-6","pb-24"],[1,"flex","items-center","gap-3","border-b","border-slate-200","pb-4","dark:border-slate-800"],[1,"material-symbols-outlined","text-3xl","text-slate-400"],[1,"text-2xl","font-bold","text-slate-900","dark:text-white"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-4","bg-white","dark:bg-slate-900","p-3","rounded-xl","shadow-sm","border","border-slate-200","dark:border-slate-800"],[1,"flex","items-center","gap-2","overflow-x-auto","w-full","sm:w-auto","pb-2","sm:pb-0"],[1,"relative"],[1,"appearance-none","bg-slate-100","dark:bg-slate-800","border-0","rounded-lg","px-4","py-2","pr-8","text-sm","font-medium","text-slate-700","dark:text-slate-300","focus:ring-2","focus:ring-primary/20","cursor-pointer","hover:bg-slate-200","dark:hover:bg-slate-700","transition-colors",3,"ngModelChange","ngModel"],["value",""],["value","open"],["value","pending"],["value","resolved"],["value","closed"],[1,"material-symbols-outlined","absolute","right-2","top-1/2","-translate-y-1/2","text-slate-500","pointer-events-none","text-[18px]"],[1,"h-6","w-px","bg-slate-200","dark:bg-slate-700","mx-1"],[1,"flex","items-center","gap-2","px-3","py-2","rounded-lg","text-sm","font-medium","transition-colors","hover:bg-slate-100","dark:hover:bg-slate-700",3,"click"],[1,"material-symbols-outlined","text-[18px]"],[1,"flex","items-center","gap-3","w-full","sm:w-auto"],[1,"relative","flex-1","sm:w-64"],[1,"material-symbols-outlined","absolute","left-3","top-1/2","-translate-y-1/2","text-slate-400","text-[20px]"],["type","text","placeholder","Search...",1,"w-full","pl-10","pr-4","py-2","bg-slate-50","dark:bg-slate-900","border","border-slate-200","dark:border-slate-700","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-primary/20","focus:border-primary","text-slate-900","dark:text-white","placeholder-slate-400","transition-all",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-2","px-3","py-2","bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","rounded-lg","text-sm","font-medium","text-slate-700","dark:text-slate-300","hover:bg-slate-50","dark:hover:bg-slate-700","transition-colors","shadow-sm","whitespace-nowrap"],[1,"material-symbols-outlined","text-[20px]"],[1,"flex","items-center","justify-center","py-12"],["icon","chat","title","No inquiries found","description","Try adjusting your filters or check back later"],[1,"bg-white","dark:bg-slate-900","border","border-slate-200","dark:border-slate-800","rounded-xl","shadow-sm","overflow-hidden"],["size","lg"],[1,"overflow-x-auto"],[1,"w-full","text-left","border-collapse"],[1,"bg-slate-50/50","dark:bg-slate-800/20","border-b","border-slate-200","dark:border-slate-800"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-slate-500","dark:text-slate-400","w-[140px]"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-slate-500","dark:text-slate-400","w-[200px]"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-slate-500","dark:text-slate-400"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-slate-500","dark:text-slate-400","w-[120px]"],[1,"py-4","px-6","text-xs","font-semibold","uppercase","tracking-wider","text-slate-500","dark:text-slate-400","w-[100px]"],[1,"divide-y","divide-slate-100","dark:divide-slate-800"],[1,"group","hover:bg-slate-50","dark:hover:bg-slate-800/50","transition-colors"],[1,"flex","items-center","justify-between","border-t","border-slate-200","dark:border-slate-800","bg-slate-50/50","dark:bg-slate-800/30","px-6","py-3"],[1,"flex","items-center","gap-2"],[1,"flex","h-8","w-8","items-center","justify-center","rounded","border","border-slate-200","bg-white","text-slate-500","hover:border-slate-300","hover:bg-slate-50","disabled:opacity-50","dark:border-slate-700","dark:bg-slate-800","dark:text-slate-400","dark:hover:bg-slate-700",3,"click","disabled"],[1,"material-symbols-outlined","text-sm"],[1,"text-sm","font-medium","text-slate-600","dark:text-slate-300"],[1,"text-sm","text-slate-500","dark:text-slate-400"],[1,"font-medium","text-slate-900","dark:text-white"],[1,"py-4","px-6","align-top"],[1,"h-2.5","w-2.5","rounded-full","bg-green-500","shadow-sm","shadow-green-500/50"],[1,"h-2.5","w-2.5","rounded-full","bg-amber-500","shadow-sm","shadow-amber-500/50"],[1,"h-2.5","w-2.5","rounded-full","bg-blue-500","shadow-sm","shadow-blue-500/50"],[1,"h-2.5","w-2.5","rounded-full","bg-slate-500"],[1,"text-sm","font-medium","capitalize","text-slate-700","dark:text-slate-200"],[1,"flex","flex-col"],[1,"text-sm","font-semibold","text-slate-900","dark:text-white"],[1,"text-xs","text-slate-500","dark:text-slate-400","font-mono","mt-0.5"],[1,"flex","flex-col","gap-2"],[1,"text-sm","text-slate-600","dark:text-slate-300","line-clamp-2","italic"],[1,"flex","items-center","gap-3"],[1,"text-[10px]","uppercase","font-bold","tracking-wider","text-slate-400","bg-slate-100","dark:bg-slate-800","px-1.5","py-0.5","rounded"],[1,"flex","items-center","gap-2","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"text-xs","font-medium","text-primary","hover:text-primary-600","hover:underline","cursor-pointer",3,"routerLink"],[1,"text-xs","font-medium","text-slate-500","hover:text-slate-700","dark:hover:text-slate-300","hover:underline"],[1,"text-xs","font-medium","text-amber-600","hover:text-amber-700","hover:underline"],[1,"text-xs","font-medium","text-slate-500","hover:text-slate-700","dark:hover:text-slate-300","hover:underline","cursor-pointer",3,"routerLink"],[1,"text-sm","font-medium","text-slate-700","dark:text-slate-300","capitalize"],[1,"py-4","px-6","align-top","text-right"],[1,"text-xs","font-medium","text-slate-400","whitespace-nowrap"],[1,"text-xs","font-medium","text-slate-500","hover:text-slate-700","dark:hover:text-slate-300","hover:underline",3,"click"],[1,"text-xs","font-medium","text-amber-600","hover:text-amber-700","hover:underline",3,"click"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"div",1)(2,"span",2),n(3,"chat"),i(),t(4,"h1",3),n(5,"Customer Inquiries"),i()(),t(6,"div",4)(7,"div",5)(8,"div",6)(9,"select",7),d("ngModelChange",function(p){return e.onStatusChange(p)}),t(10,"option",8),n(11,"All Statuses"),i(),t(12,"option",9),n(13,"Open"),i(),t(14,"option",10),n(15,"Pending"),i(),t(16,"option",11),n(17,"Resolved"),i(),t(18,"option",12),n(19,"Closed"),i()(),t(20,"span",13),n(21,"arrow_drop_down"),i()(),c(22,"div",14),t(23,"button",15),d("click",function(){return e.setChannelFilter("whatsapp")}),t(24,"span",16),n(25,"chat"),i(),n(26," WhatsApp "),i(),t(27,"button",15),d("click",function(){return e.setChannelFilter("telegram")}),t(28,"span",16),n(29,"send"),i(),n(30," Telegram "),i(),t(31,"button",15),d("click",function(){return e.setChannelFilter("api")}),t(32,"span",16),n(33,"code"),i(),n(34," API "),i()(),t(35,"div",17)(36,"div",18)(37,"span",19),n(38,"search"),i(),t(39,"input",20),d("ngModelChange",function(p){return e.searchQuery.set(p)}),i()(),t(40,"button",21)(41,"span",22),n(42,"filter_list"),i(),n(43," Filter "),i()()(),v(44,U,2,0,"div",23)(45,X,1,0,"app-empty-state",24)(46,le,35,7,"div",25),i()),r&2&&(o(9),g("ngModel",e.statusFilter()),o(14),x("bg-green-100",e.channelFilter()==="whatsapp")("text-green-700",e.channelFilter()==="whatsapp")("dark:bg-green-900/30",e.channelFilter()==="whatsapp")("dark:text-green-400",e.channelFilter()==="whatsapp")("bg-slate-50",e.channelFilter()!=="whatsapp")("text-slate-600",e.channelFilter()!=="whatsapp")("dark:bg-slate-800",e.channelFilter()!=="whatsapp")("dark:text-slate-400",e.channelFilter()!=="whatsapp"),o(),x("filled",e.channelFilter()==="whatsapp"),o(3),x("bg-blue-100",e.channelFilter()==="telegram")("text-blue-700",e.channelFilter()==="telegram")("dark:bg-blue-900/30",e.channelFilter()==="telegram")("dark:text-blue-400",e.channelFilter()==="telegram")("bg-slate-50",e.channelFilter()!=="telegram")("text-slate-600",e.channelFilter()!=="telegram")("dark:bg-slate-800",e.channelFilter()!=="telegram")("dark:text-slate-400",e.channelFilter()!=="telegram"),o(),x("filled",e.channelFilter()==="telegram"),o(3),x("bg-purple-100",e.channelFilter()==="api")("text-purple-700",e.channelFilter()==="api")("dark:bg-purple-900/30",e.channelFilter()==="api")("dark:text-purple-400",e.channelFilter()==="api")("bg-slate-50",e.channelFilter()!=="api")("text-slate-600",e.channelFilter()!=="api")("dark:bg-slate-800",e.channelFilter()!=="api")("dark:text-slate-400",e.channelFilter()!=="api"),o(),x("filled",e.channelFilter()==="api"),o(7),g("ngModel",e.searchQuery()),o(5),C(e.isLoading()?44:e.filteredInquiries().length===0?45:46))},dependencies:[N,O,Q,j,L,A,V,z,D,B,R,W],encapsulation:2,changeDetection:0})};export{I as default};
