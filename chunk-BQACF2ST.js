import{a as F,b as U}from"./chunk-6JD6GA7W.js";import{d as M}from"./chunk-TKVNSRWZ.js";import"./chunk-W2ZFWDSY.js";import{a as V}from"./chunk-OFIQSEYL.js";import"./chunk-GF7BQK6Q.js";import"./chunk-XAZ3CRE3.js";import{Cb as f,Eb as g,Ec as I,Gb as l,Pa as a,Rb as E,Tb as r,Ub as m,Vb as _,_ as T,_a as D,bc as N,da as h,ea as b,jc as S,nb as u,oa as c,pb as x,qb as L,rb as y,sb as C,tb as p,ub as n,vb as i,wb as w}from"./chunk-JKZ4R3JY.js";import"./chunk-2NFLSA4Y.js";var A=s=>["/shipments",s],R=(s,t)=>t.id;function j(s,t){s&1&&(n(0,"div",9)(1,"div",12),w(2,"app-loading-spinner"),n(3,"p",4),r(4,"Loading shipments..."),i()()())}function $(s,t){if(s&1){let e=f();n(0,"div",10)(1,"div",13)(2,"span",14),r(3,"error"),i(),n(4,"div")(5,"h3",15),r(6,"Failed to load shipments"),i(),n(7,"p",16),r(8),i(),n(9,"button",17),g("click",function(){h(e);let d=l();return b(d.refreshShipments())}),r(10," Try Again "),i()()()()}if(s&2){let e=l();a(8),m(e.error())}}function z(s,t){s&1&&(n(0,"div",9)(1,"div",18)(2,"span",19),r(3,"package_2"),i(),n(4,"h3",20),r(5,"No shipments found"),i(),n(6,"p",21),r(7,"Get started by creating your first shipment."),i()()())}function B(s,t){if(s&1&&(n(0,"p",28),r(1),i()),s&2){let e=l().$implicit;a(),m(e.customerEmail)}}function O(s,t){if(s&1){let e=f();n(0,"tr",35)(1,"td",37)(2,"p",38),r(3),i()(),n(4,"td",37)(5,"div")(6,"p",39),r(7),i(),u(8,B,2,1,"p",28),i()(),n(9,"td",37)(10,"div",40)(11,"span",41),r(12),i(),n(13,"span",42),r(14,"arrow_forward"),i(),n(15,"span",41),r(16),i()()(),n(17,"td",37)(18,"span",43),r(19),i()(),n(20,"td",37),w(21,"app-status-badge",44),i(),n(22,"td",37)(23,"p",45),r(24),i()(),n(25,"td",46)(26,"div",47)(27,"button",48)(28,"span",7),r(29,"visibility"),i()(),n(30,"button",49),g("click",function(){let d=h(e).$implicit,v=l(2);return b(v.trackShipment(d.trackingNumber))}),n(31,"span",7),r(32,"location_on"),i()()()()()}if(s&2){let e=t.$implicit,o=l(2);a(3),m(e.trackingNumber),a(4),m(e.customerName),a(),x(e.customerEmail?8:-1),a(3),p("title",e.origin),a(),m(e.origin),a(3),p("title",e.destination),a(),m(e.destination),a(3),_(" ",e.serviceType," "),a(2),p("label",e.status)("variant",o.getStatusVariant(e.status)),a(3),m(o.formatDate(e.estimatedDelivery)),a(3),p("routerLink",N(12,A,e.id))}}function G(s,t){if(s&1){let e=f();n(0,"button",54),g("click",function(){let d=h(e).$implicit,v=l(3);return b(v.goToPage(d))}),r(1),i()}if(s&2){let e=t.$implicit,o=l(3);E("bg-primary",e===o.currentPage())("text-white",e===o.currentPage())("hover:bg-slate-100",e!==o.currentPage())("dark:hover:bg-slate-700",e!==o.currentPage()),p("disabled",o.isLoading()),a(),_(" ",e," ")}}function q(s,t){if(s&1){let e=f();n(0,"div",36)(1,"div",23)(2,"button",50),g("click",function(){h(e);let d=l(2);return b(d.previousPage())}),n(3,"span",51),r(4,"chevron_left"),i(),r(5," Previous "),i(),n(6,"div",52),y(7,G,2,10,"button",53,L),i(),n(9,"button",50),g("click",function(){h(e);let d=l(2);return b(d.nextPage())}),r(10," Next "),n(11,"span",51),r(12,"chevron_right"),i()()()()}if(s&2){let e=l(2);a(2),p("disabled",e.currentPage()<=1||e.isLoading()),a(5),C(e.visiblePages()),a(2),p("disabled",e.currentPage()>=e.totalPages()||e.isLoading())}}function H(s,t){if(s&1&&(n(0,"div",11)(1,"div",22)(2,"div",23)(3,"div",24)(4,"div",25)(5,"span",26),r(6),i(),n(7,"span",27),r(8,"total shipments"),i()(),n(9,"div",25)(10,"span",26),r(11),i(),n(12,"span",27),r(13),i()()(),n(14,"div",28),r(15),i()()(),n(16,"div",29)(17,"table",30)(18,"thead",31)(19,"tr")(20,"th",32),r(21,"Tracking #"),i(),n(22,"th",32),r(23,"Customer"),i(),n(24,"th",32),r(25,"Route"),i(),n(26,"th",32),r(27,"Service"),i(),n(28,"th",32),r(29,"Status"),i(),n(30,"th",32),r(31,"ETA"),i(),n(32,"th",33),r(33,"Actions"),i()()(),n(34,"tbody",34),y(35,O,33,14,"tr",35,R),i()()(),u(37,q,13,2,"div",36),i()),s&2){let e=l();a(6),m(e.totalShipments()),a(5),m(e.currentPage()),a(2),_("of ",e.totalPages()," pages"),a(2),_(" Last updated: ",e.lastUpdated()," "),a(20),C(e.shipments()),a(2),x(e.totalPages()>1?37:-1)}}var P=class s{shipmentsService=T(V);isLoading=c(!1);error=c(null);currentPage=c(1);totalShipments=c(0);lastUpdated=c("");rawShipments=c([]);pageSize=c(25);shipments=S(()=>this.rawShipments().map(this.mapToViewModel));totalPages=S(()=>Math.ceil(this.totalShipments()/this.pageSize()));visiblePages=S(()=>{let t=this.currentPage(),e=this.totalPages(),o=[],d=Math.max(1,t-2),v=Math.min(e,t+2);for(let k=d;k<=v;k++)o.push(k);return o});ngOnInit(){this.loadShipments()}refreshShipments(){this.loadShipments()}previousPage(){this.currentPage()>1&&(this.currentPage.update(t=>t-1),this.loadShipments())}nextPage(){this.currentPage()<this.totalPages()&&(this.currentPage.update(t=>t+1),this.loadShipments())}goToPage(t){t!==this.currentPage()&&t>=1&&t<=this.totalPages()&&(this.currentPage.set(t),this.loadShipments())}trackShipment(t){console.log("Track shipment:",t)}getStatusVariant(t){let e=t.toLowerCase();return e.includes("delivered")||e.includes("completed")?"success":e.includes("transit")||e.includes("shipping")||e.includes("progress")?"info":e.includes("delayed")||e.includes("issue")||e.includes("problem")?"error":e.includes("pending")||e.includes("processing")||e.includes("awaiting")?"warning":"default"}formatDate(t){if(!t)return"N/A";try{let e=new Date(t);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}catch{return"Invalid date"}}loadShipments(){this.isLoading.set(!0),this.error.set(null),this.shipmentsService.apiShipmentsGet(this.currentPage(),this.pageSize()).subscribe({next:t=>{this.rawShipments.set(t.data||[]),this.totalShipments.set(t.pagination?.totalItems||0),this.updateLastUpdated(),this.isLoading.set(!1)},error:t=>{console.error("Failed to load shipments:",t),this.error.set(t.status===404?"No shipments found":t.status>=500?"Server error. Please try again later.":t.error?.message||"Failed to load shipments"),this.isLoading.set(!1)}})}mapToViewModel=t=>{let e=t.trackingNumber||"N/A";return{id:e!=="N/A"?e:t.id||"",trackingNumber:e,customerName:t.receiver?.name||"Unknown Customer",customerEmail:t.receiver?.email||"",origin:this.formatLocation(t.sender),destination:this.formatLocation(t.receiver),status:this.formatStatus(t.status),serviceType:t.serviceType||"Standard",estimatedDelivery:t.estimatedDelivery||"",createdAt:t.createdAt||""}};formatLocation(t){if(!t)return"Unknown";let e=[t.city,t.country].filter(Boolean);return e.length>0?e.join(", "):t.address||"Unknown"}formatStatus(t){return t?t.replace(/_/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "):"Unknown"}updateLastUpdated(){let t=new Date;this.lastUpdated.set(new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t))}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=D({type:s,selectors:[["app-shipments"]],decls:20,vars:7,consts:[[1,"mx-auto","flex","w-full","max-w-7xl","flex-col","gap-6"],[1,"flex","justify-between","items-end","flex-wrap","gap-4"],[1,"flex","flex-col","gap-1"],[1,"text-3xl","font-bold","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400"],[1,"flex","gap-2"],[1,"flex","items-center","gap-2","px-4","py-2","bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","rounded-lg","text-sm","font-medium","text-slate-700","dark:text-slate-300","hover:bg-slate-50","dark:hover:bg-slate-700","transition-colors","shadow-sm","disabled:opacity-50",3,"click","disabled"],[1,"material-symbols-outlined","text-[20px]"],[1,"flex","items-center","gap-2","px-4","py-2","bg-white","dark:bg-slate-800","border","border-slate-200","dark:border-slate-700","rounded-lg","text-sm","font-medium","text-slate-700","dark:text-slate-300","hover:bg-slate-50","dark:hover:bg-slate-700","transition-colors","shadow-sm"],[1,"rounded-xl","border","border-slate-200","bg-white","dark:border-slate-800","dark:bg-slate-900","p-12"],[1,"rounded-xl","border","border-red-200","bg-red-50","dark:border-red-800","dark:bg-red-900/20","p-6"],[1,"rounded-xl","border","border-slate-200","bg-white","overflow-hidden","dark:border-slate-800","dark:bg-slate-900"],[1,"flex","flex-col","items-center","justify-center","gap-4"],[1,"flex","items-start","gap-3"],[1,"material-symbols-outlined","text-red-500","text-xl"],[1,"text-sm","font-semibold","text-red-800","dark:text-red-200","mb-1"],[1,"text-sm","text-red-700","dark:text-red-300"],[1,"mt-3","px-3","py-1.5","bg-red-100","hover:bg-red-200","dark:bg-red-900","dark:hover:bg-red-800","text-red-800","dark:text-red-200","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"text-center"],[1,"material-symbols-outlined","text-4xl","text-slate-400","mb-4","block"],[1,"text-lg","font-semibold","text-slate-900","dark:text-white","mb-2"],[1,"text-slate-500","dark:text-slate-400","mb-6"],[1,"bg-slate-50","dark:bg-slate-800","px-6","py-4","border-b","border-slate-200","dark:border-slate-700"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-6"],[1,"text-sm"],[1,"font-medium","text-slate-900","dark:text-white"],[1,"text-slate-500","dark:text-slate-400","ml-1"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-slate-50","dark:bg-slate-800","border-b","border-slate-200","dark:border-slate-700"],[1,"px-4","py-3","text-left","text-xs","font-semibold","text-slate-700","dark:text-slate-300","uppercase","tracking-wider"],[1,"px-4","py-3","text-right","text-xs","font-semibold","text-slate-700","dark:text-slate-300","uppercase","tracking-wider"],[1,"divide-y","divide-slate-200","dark:divide-slate-800"],[1,"group","hover:bg-primary/5","dark:hover:bg-slate-800/50","transition-colors","cursor-pointer"],[1,"bg-slate-50","dark:bg-slate-800","px-6","py-4","border-t","border-slate-200","dark:border-slate-700"],[1,"py-3","px-4"],[1,"text-sm","font-mono","font-medium","text-slate-900","dark:text-white"],[1,"text-sm","font-medium","text-slate-900","dark:text-white"],[1,"flex","items-center","gap-2","text-sm","text-slate-600","dark:text-slate-400"],[1,"truncate","max-w-[100px]",3,"title"],[1,"material-symbols-outlined","text-[16px]","text-slate-400"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800","dark:bg-blue-900/20","dark:text-blue-300"],[3,"label","variant"],[1,"text-sm","text-slate-600","dark:text-slate-400"],[1,"py-3","px-4","text-right"],[1,"flex","justify-end","gap-2"],["title","View Details",1,"p-1.5","hover:bg-slate-100","dark:hover:bg-slate-700","rounded","text-slate-500","hover:text-primary","transition-colors",3,"routerLink"],["title","Track Shipment",1,"p-1.5","hover:bg-slate-100","dark:hover:bg-slate-700","rounded","text-slate-500","hover:text-primary","transition-colors",3,"click"],[1,"flex","items-center","gap-2","px-3","py-2","text-sm","font-medium","text-slate-700","dark:text-slate-300","hover:bg-slate-100","dark:hover:bg-slate-700","disabled:opacity-50","disabled:cursor-not-allowed","rounded-md","transition-colors",3,"click","disabled"],[1,"material-symbols-outlined","text-[16px]"],[1,"flex","items-center","gap-2"],[1,"w-8","h-8","text-sm","font-medium","rounded-md","transition-colors","disabled:opacity-50",3,"disabled","bg-primary","text-white","hover:bg-slate-100","dark:hover:bg-slate-700"],[1,"w-8","h-8","text-sm","font-medium","rounded-md","transition-colors","disabled:opacity-50",3,"click","disabled"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4,"Shipment Management"),i(),n(5,"p",4),r(6,"Track and manage all shipments in real-time."),i()(),n(7,"div",5)(8,"button",6),g("click",function(){return o.refreshShipments()}),n(9,"span",7),r(10,"refresh"),i(),r(11," Refresh "),i(),n(12,"button",8)(13,"span",7),r(14,"filter_alt"),i(),r(15," Filter "),i()()(),u(16,j,5,0,"div",9),u(17,$,11,1,"div",10),u(18,z,8,0,"div",9),u(19,H,38,5,"div",11),i()),e&2&&(a(8),p("disabled",o.isLoading()),a(),E("animate-spin",o.isLoading()),a(7),x(o.isLoading()&&o.shipments().length===0?16:-1),a(),x(o.error()?17:-1),a(),x(!o.isLoading()&&!o.error()&&o.shipments().length===0?18:-1),a(),x(!o.isLoading()&&!o.error()&&o.shipments().length>0?19:-1))},dependencies:[I,M,F,U],encapsulation:2,changeDetection:0})},re=P;export{P as ShipmentsComponent,re as default};
